function loadStyle(e){var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e;var i=document.getElementsByTagName("head")[0];i.appendChild(t)}function initScreen(){var e=browser.versions;g_versions=e;var t=window.screen.width;if(e.iPhone||e.iPad)if(320>=t||375==t||414==t){for(metas=window.parent.document.getElementsByTagName("meta"),i=0;i<metas.length;i++)if("viewport"==metas[i].getAttribute("name")){metas[i].setAttribute("content","width=320");break}SCREENKEY=480>t&&t>=360?400:320}else SCREENKEY=640;else SCREENKEY=t>=640?640:640>t&&t>=600?600:600>t&&t>=540?540:540>t&&t>=480?480:480>t&&t>=420?440:420>t&&t>=380?400:380>t&&t>=340?360:320;g_screenkey=SCREENKEY,SIZEPER=SCREENKEY/640;var a="static/css/cf"+SCREENKEY+".css";loadStyle(a)}function sc(){var e="<div style='color:red'>";e+=" 网页可见区域宽："+document.body.clientWidth+"<br />",e+=" 网页可见区域高："+document.body.clientHeight+"<br />",e+=" 网页可见区域宽："+document.body.offsetWidth+" (包括边线和滚动条的宽)<br />",e+=" 网页可见区域高："+document.body.offsetHeight+" (包括边线的宽)<br />",e+=" 网页正文全文宽："+document.body.scrollWidth+"<br />",e+=" 网页正文全文高："+document.body.scrollHeight+"<br />",e+=" 网页被卷去的高(ff)："+document.body.scrollTop+"<br />",e+=" 网页被卷去的高(ie)："+document.documentElement.scrollTop+"<br />",e+=" 网页被卷去的左："+document.body.scrollLeft+"<br />",e+=" 网页正文部分上："+window.screenTop+"<br />",e+=" 网页正文部分左："+window.screenLeft+"<br />",e+=" 屏幕分辨率的高："+window.screen.height+"<br />",e+=" 屏幕分辨率的宽："+window.screen.width+"<br />",e+=" 屏幕可用工作区高度："+window.screen.availHeight+"<br />",e+=" 屏幕可用工作区宽度："+window.screen.availWidth+"<br />",e+=" 您的屏幕设置是 "+window.screen.colorDepth+" 位彩色<br />",e+=" 您的屏幕设置 "+window.screen.deviceXDPI+" 像素/英寸<br />",e+="</div>",document.writeln(e)}function aa(){document.writeln("语言版本: "+browser.language),document.writeln(" 是否为移动终端: "+browser.versions.mobile),document.writeln(" ios终端: "+browser.versions.ios),document.writeln(" android终端: "+browser.versions.android),document.writeln(" 是否为iPhone: "+browser.versions.iPhone),document.writeln(" 是否为iPhone5: "+browser.versions.iPhone5),document.writeln(" 是否iPad: "+browser.versions.iPad),document.writeln(navigator.userAgent)}function getStyleValue(e,t,a){var n,s,o,r,n;for(key in document.styleSheets){var l=document.styleSheets[key].href.indexOf(e);if(l>0){n=document.styleSheets[key];break}}if(n){for(s=n.cssRules?n.cssRules:n.rules,i=0;i<s.length;i++)if(o=s[i],o.selectorText&&o.selectorText.toLowerCase()==t.toLowerCase()){r=o.style[a];break}return r}}function getCSSValue(e,t){return getStyleValue("cf.css","."+e,t)}function uncamelize(e,t){return t=t||"-",e.replace(/([a-z])([A-Z])/g,function(e,i,a){return i+t+a.toLowerCase()})}function getPar(e){var t=document.location.href,i=t.indexOf(e+"=");if(-1==i)return!1;var a=t.slice(e.length+i+1),n=a.indexOf("&");return-1!=n&&(a=a.slice(0,n)),a}function isNumValue(e){if(null!=e){var t,i;return i=/\d*/i,t=e.match(i),t==e?!0:!1}return!1}function gameErr(e){var t=document.getElementById("pageerror");t||(t=document.createElement("div"),t.id="pageerror",document.body.appendChild(t));var i="<span style='color:black;font-size:80%'>"+e+"</span><br><a href=''>点击刷新</a>";t.innerHTML=i}function isLegalName(e){for(var t=e.indexOf("-y"),i=e.indexOf("-x"),a=["backgroundRepeat","cssText","backgroundClip","borderRight","borderLeft","backgroundImage"],n=!1,s=0;s<a.length;s++){var o=e.indexOf(a[s]);if(o>=0){n=!0;break}}return!n&&!e.match(/^[0-9].*$/)&&-1==t&&-1==i}function isLegalValue(e){return e.length>0&&"initial"!=e}function outputCssStyles(e,t){var a;for(key in document.styleSheets){var n=document.styleSheets[key].href.indexOf(e);if(n>0){a=document.styleSheets[key];break}}if(a){rss=a.cssRules?a.cssRules:a.rules;var s="";for(i=0;i<rss.length;i++){style=rss[i],s+=style.selectorText.toLowerCase()+"{";for(param in style.style){var o=style.style[param];if("function"!=typeof o&&isLegalName(param)&&isLegalValue(o)){o=o.replace("(http://localhost:8080/cf/","('../../"),o=o.replace(".png)",".png')");var n=o.indexOf("px");if(n>0){var r=o.substr(0,n);o=parseInt(parseInt(r)*t)+"px"}"backgroundSize"==param?(s+=uncamelize(param,"-")+":"+o+";",s+="-moz-background-size:"+o+";"):s+=uncamelize(param,"-")+":"+o+";"}}s+="}<br><br>"}return s}}function outputCssFiles(e){var t=document.createElement("DIV"),i=e/640;t.innerHTML=outputCssStyles("cf640.css",i),t.style.color="#000000",t.width="500px",t.height="600px",document.body.appendChild(t)}function stringToBytes(e){for(var t,i,a=[],n=0;n<e.length;n++){t=e.charCodeAt(n),i=[];do i.push(255&t),t>>=8;while(t);a=a.concat(i.reverse())}return a}function errorDB(e){alert("Error processing SQL: "+e.code)}function sleep(e){for(var t=new Date,i=t.getTime()+e;;)if(t=new Date,t.getTime()>i)return}function rotateImg(e,t,i,a,n){var s,o,r,l,c,p,g=e.getImageData(t,i,a,n),d=g.height,m=g.width,u=m/2;for(o=0;d>o;o++)for(s=0;u>s;s++)for(l=(o<<2)*m+(s<<2),c=(o+1<<2)*m-(s+1<<2),r=0;4>r;r++)p=g.data[l+r],g.data[l+r]=g.data[c+r],g.data[c+r]=p;return g}function carAni1(){var e="divcar1",t=[["+="+parseInt(410*SIZEPER)+"px","+="+parseInt(240*SIZEPER)+"px",parseInt(11e3),"icon_car1.png","-"+parseInt(50*SIZEPER)+"px",parseInt(338*SIZEPER)+"px"],["-="+parseInt(100*SIZEPER)+"px","+="+parseInt(80*SIZEPER)+"px",parseInt(2500),"icon_car1_2.png"]],i=document.getElementById(e);if(!i){var a=document.createElement("img");a.id=e,a.className=e,a.style.position="absolute",document.body.appendChild(a)}var n=$("#"+e);n.fadeIn("fast"),n.attr("src","static/img/"+t[0][3]),n.css("z-index",0),n.css("left",t[0][4]),n.css("top",t[0][5]);var s=t[0];n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[1][3])}),s=t[1],n.animate({left:s[0],top:s[1]},s[2]),n.fadeOut(1500,function(){carAni1()})}function carAni2(){var e="divcar2",t=[["-="+parseInt(330*SIZEPER)+"px","+="+parseInt(220*SIZEPER)+"px",parseInt(7500),"icon_car2.png",parseInt(590*SIZEPER)+"px",parseInt(244*SIZEPER)+"px"],["+="+parseInt(280*SIZEPER)+"px","+="+parseInt(170*SIZEPER)+"px",parseInt(7500),"icon_car2_2.png"],["-="+parseInt(80*SIZEPER)+"px","+="+parseInt(80*SIZEPER)+"px",parseInt(3500),"icon_car2.png"],["+="+parseInt(120*SIZEPER)+"px","+="+parseInt(120*SIZEPER)+"px",parseInt(4500),"icon_car2_2.png"],["-="+parseInt(180*SIZEPER)+"px","+="+parseInt(120*SIZEPER)+"px",parseInt(8e3),"icon_car2.png"]],i=document.getElementById(e);if(!i){var a=document.createElement("img");a.id=e,a.className=e,a.style.position="absolute",document.body.appendChild(a)}var n=$("#"+e);n.fadeIn("fast"),n.attr("src","static/img/"+t[0][3]),n.css("z-index",0),n.css("left",t[0][4]),n.css("top",t[0][5]);var s=t[0];n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[1][3])}),s=t[1],n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[2][3])}),s=t[2],n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[3][3])}),s=t[3],n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[4][3])}),s=t[4],n.animate({left:s[0],top:s[1]},s[2]),n.fadeOut(1500,function(){carAni2()})}function carAni3(){var e="divcar3",t=[["-="+parseInt(150*SIZEPER)+"px","+="+parseInt(120*SIZEPER)+"px",parseInt(4500),"icon_car3.png",parseInt(585*SIZEPER)+"px",parseInt(603*SIZEPER)+"px"],["+="+parseInt(150*SIZEPER)+"px","+="+parseInt(110*SIZEPER)+"px",parseInt(4300),"icon_car3_2.png"],["-="+parseInt(140*SIZEPER)+"px","+="+parseInt(115*SIZEPER)+"px",parseInt(6500),"icon_car3.png"]],i=document.getElementById(e);if(!i){var a=document.createElement("img");a.id=e,a.className=e,a.style.position="absolute",document.body.appendChild(a)}var n=$("#"+e);n.fadeIn("fast"),n.attr("src","static/img/"+t[0][3]),n.css("z-index",5),n.css("left",t[0][4]),n.css("top",t[0][5]);var s=t[0];n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[1][3])}),s=t[1],n.animate({left:s[0],top:s[1]},s[2],function(){var i=$("#"+e);i.attr("src","static/img/"+t[2][3])}),s=t[2],n.animate({left:s[0],top:s[1]},s[2]),n.fadeOut(1500,function(){carAni3()})}function loadAni(){var e=document.getElementById(g_msg.loadname);if(e){var t=$("#msg_load1");t.animate({top:"-10px"},30),t.animate({top:"-10px"},30,function(){loadAni2()}),t.animate({top:"0px"},60)}}function loadAni2(){var e=$("#msg_load2");e.animate({top:"-10px"},30),e.animate({top:"-10px"},30,function(){loadAni3()}),e.animate({top:"0px"},60)}function loadAni3(){var e=$("#msg_load3");e.animate({top:"-10px"},30),e.animate({top:"-10px"},30,function(){loadAni4()}),e.animate({top:"0px"},60)}function loadAni4(){var e=$("#msg_load4");e.animate({top:"-10px"},30),e.animate({top:"-10px"},30,function(){loadAni5()}),e.animate({top:"0px"},60)}function loadAni5(){var e=$("#msg_load5");e.animate({top:"-15px"},30),e.animate({top:"-15px"},30,function(){loadAni6()}),e.animate({top:"0px"},60)}function loadAni6(){var e=$("#msg_load6");e.animate({top:"-15px"},50),e.animate({top:"-15px"},50,function(){loadAni7()}),e.animate({top:"0px"},100)}function loadAni7(){var e=$("#msg_load7");e.animate({top:"-30px"},100),e.animate({top:"0px"},100,function(){sleep(400),loadAni()})}function MsgTipCallback(){var e=g_msg.outtips.shift(),t=document.getElementById(e);t&&document.body.removeChild(t)}function aaa(){log("aaa")}function aaa2(){}var SiteUrl="http://202.69.27.238:8081/cf",Share_Img=SiteUrl+"/static/img/app_icon_share.png",Share_Url=SiteUrl+"/dl.html",Dl_Url_ios="http://itunes.apple.com/cn/app/id549421060",Dl_Url_android="http://dd.myapp.com/16891/32B5098A37D290206587504942EBB30D.apk?fsname=com.pingan.lifeinsurance_2.5.6.2_52.apk&asr=8eff",g_game,g_username=null,g_openid=null,ZAN_COUNT=10,LoginMode=0,UpdateDuration=200,MsgDuration=100,StockDuration=1e3,NetReqWait=2e4,QUOTETIME=300,FirstEventTriggerTime=300,EventTriggerTime=300,Panel_ClickColor="#123123",Is_InBrowser=!0,Share_Prize=500,Share_PageText="又开始了新的一天！是否分享您今日的心情给您的好朋友们?",Share_PageText2="成功分享将获得<span style='color:red'>"+Share_Prize+"元</span>游戏币奖励",Share_Title="我正在使用平安人寿APP玩<<财富人生>>游戏，快跟我一起来吧，更多惊喜和活动等着您:"+Share_Url,Share_Text="财富人生",Share_PageText_Prize="获得<img class='cficon_money' src='static/img/money.png'/><span style='color:red'>"+Share_Prize+"</span>",Login_InputDft="输入昵称",login_imgs=[{name:"map",src:"static/img/login_bg.png",x:0,y:0,zindex:0},{name:"inputnick",src:"static/img/nick_input.png",x:130,y:110,zindex:0},{name:"choseboy",src:"static/img/player_head_bg.png",x:150,y:380,zindex:0},{name:"chosegirl",src:"static/img/player_head_bg.png",x:400,y:380,zindex:0},{name:"choseboy",src:"static/img/icon_boy.png",x:150,y:380,zindex:0},{name:"chosegirl",src:"static/img/icon_girl.png",x:400,y:380,zindex:0},{name:"wchoseboy",src:"static/img/bt_boy.png",x:130,y:510,zindex:0},{name:"wchosegirl",src:"static/img/bt_girl.png",x:390,y:510,zindex:0},{name:"btstart",src:"static/img/bt_start.png",x:205,y:590,zindex:0}],game_imgs=[{name:"map",src:"static/img/map.png",x:0,y:0,zindex:0},{name:"quest",src:"static/img/icon_quest.png",x:555,y:7,hasDiv:!0},{name:"playerinfo",src:"static/img/icon_head.png",x:0,y:0,hasDiv:!0},{name:"toplist",src:"static/img/icon_toplist.png",x:555,y:120,hasDiv:!0,zindex:100},{name:"help",src:"static/img/icon_help.png",x:170,y:280,hasDiv:!0},{name:"stock",src:"static/img/icon_stock.png",x:385,y:207,hasDiv:!0,zindex:100},{name:"bank",src:"static/img/icon_bank.png",x:70,y:448,hasDiv:!0,zindex:100},{name:"insure",src:"static/img/icon_insure.png",x:342,y:622,hasDiv:!0,zindex:100},{name:"saving",src:"static/img/icon_saving.png",x:150,y:15,hasDiv:!0},{name:"weektop",src:"static/img/icon_weektop.png",x:365,y:15,hasDiv:!0},{name:"level",src:"static/img/icon_level.png",x:-5,y:103,hasDiv:!0}],head_imgs=[{name:"man",src:"static/img/icon_boy.png",x:0,y:0,abs:!0,hasDiv:!0,divX:160,divY:10,zindex:10},{name:"women",src:"static/img/icon_girl.png",x:0,y:0,abs:!0,hasDiv:!0,divX:160,divY:10,zindex:10}],feeling_imgs=[{id:1,src:"static/img/feeling_1.png"},{id:2,src:"static/img/feeling_2.png"},{id:3,src:"static/img/feeling_3.png"},{id:4,src:"static/img/feeling_4.png"},{id:5,src:"static/img/feeling_5.png"},{id:6,src:"static/img/feeling_6.png"},{id:7,src:"static/img/feeling_7.png"},{id:8,src:"static/img/feeling_8.png"}],QUEST_TYPE={BUY_INSURE:0,BUY_FINAN:1,BUY_STOCK:2,SELL_STOCK:3,SAVING:4},QUEST_STATUS={ACTIVE:0,DONE:1,FINISH:2},ITEM_TYPE={CASH:0,EXP:1},ITEM_NAME={CASH:"金钱",EXP:"经验"},EVENT_TYPE=[],MSG_OK=0,MSG_SQLExecuteError=1,MSG_MoneyNotEnough=2,MSG_NoThisStock=3,MSG_NoSavingData=4,MSG_PlayerNotExist=5,MSG_WrongPlayerNameOrPwd=6,MSG_StockIsClosed=7,MSG_PlayerNameIsExist=8,MSG_SavingNotExist=9,MSG_SavingIsExist=10,MSG_InsureNotExist=11,MSG_InsureIsExist=12,MSG_StockNotExist=13,MSG_StockQtyIsZero=14,ERR_MSG={};ERR_MSG[MSG_SQLExecuteError]="sql出错",ERR_MSG[MSG_MoneyNotEnough]="您的钱不够",ERR_MSG[MSG_NoThisStock]="这个股票不存在",ERR_MSG[MSG_NoSavingData]="没有该存款",ERR_MSG[MSG_PlayerNotExist]="玩家不存在",ERR_MSG[MSG_WrongPlayerNameOrPwd]="用户名或密码不正确",ERR_MSG[MSG_StockIsClosed]="股市已关闭,不能买卖",ERR_MSG[MSG_PlayerNameIsExist]="该昵称已存在",ERR_MSG[MSG_SavingNotExist]="你没有该存款，不能取出",ERR_MSG[MSG_SavingIsExist]="已有该存款，不能重复存入",ERR_MSG[MSG_InsureNotExist]="你没有该保险，不能删除",ERR_MSG[MSG_InsureIsExist]="已有该保险，不能重复购买",ERR_MSG[MSG_StockNotExist]="找不到该股票，无法购买",ERR_MSG[MSG_StockQtyIsZero]="请选择股票手数";var Page_Top=80,PageDetail_Top=100,Screen_Status_Height=40,Screen_Nav_Height=88,Scene_Height=1236-Screen_Status_Height-Screen_Nav_Height,PageSizes={640:{SceneWidth:640,SceneHeight:1008,PieWidth:350,PieFontSize:30,PieFontSize2:19,PieHeight:400,PageWidth:"580px",PageHeight:"237px",PageTop:80,DetailPageTop:100,MsgTop:120,StockView:[550,310,450,210,22],EventMoney:["70px","410px"],SigninMoney:["60px","20px","210px"],QuestMoney:["120px","390px"]},600:{SceneWidth:640,SceneHeight:1008,PieWidth:320,PieFontSize:25,PieFontSize2:17,PieHeight:350,PageWidth:"532px",PageHeight:"277px",PageTop:75,DetailPageTop:95,MsgTop:114,StockView:[495,300,410,195,20],EventMoney:["70px","380px"],SigninMoney:["55px","25px","185px"],QuestMoney:["120px","390px"]},560:{SceneWidth:640,SceneHeight:1008,PieWidth:300,PieFontSize:25,PieFontSize2:17,PieHeight:326,PageWidth:"499px",PageHeight:"277px",PageTop:70,DetailPageTop:90,MsgTop:110,StockView:[468,284,384,187,20],EventMoney:["70px","360px"],SigninMoney:["53px","30px","167px"],QuestMoney:["120px","390px"]},540:{SceneWidth:640,SceneHeight:1008,PieWidth:290,PieFontSize:23,PieFontSize2:15,PieHeight:300,PageWidth:"482px",PageHeight:"227px",PageTop:70,DetailPageTop:90,MsgTop:108,StockView:[450,280,380,200,19],EventMoney:["70px","350px"],SigninMoney:["50px","30px","150px"],QuestMoney:["120px","390px"]},520:{SceneWidth:640,SceneHeight:1008,PieWidth:280,PieFontSize:24,PieFontSize2:17,PieHeight:303,PageWidth:"465px",PageHeight:"277px",PageTop:65,DetailPageTop:85,MsgTop:105,StockView:[438,267,363,178,19],EventMoney:["70px","340px"],SigninMoney:["52px","35px","148px"],QuestMoney:["120px","390px"]},480:{SceneWidth:640,SceneHeight:1008,PieWidth:260,PieFontSize:24,PieFontSize2:14,PieHeight:280,PageWidth:"432px",PageHeight:"277px",PageTop:60,DetailPageTop:80,MsgTop:100,StockView:[410,250,340,170,18],EventMoney:["70px","320px"],SigninMoney:["50px","36px","130px"],QuestMoney:["120px","390px"]},440:{SceneWidth:640,SceneHeight:1008,PieWidth:240,PieFontSize:23,PieFontSize2:14,PieHeight:260,PageWidth:"392px",PageHeight:"247px",PageTop:53,DetailPageTop:70,MsgTop:84,StockView:[375,247,305,163,17],EventMoney:["70px","286px"],SigninMoney:["50px","38px","123px"],QuestMoney:["120px","390px"]},400:{SceneWidth:640,SceneHeight:1008,PieWidth:220,PieFontSize:22,PieFontSize2:13,PieHeight:240,PageWidth:"362px",PageHeight:"212px",PageTop:46,DetailPageTop:60,MsgTop:67,StockView:[335,243,265,157,16],EventMoney:["70px","253px"],SigninMoney:["50px","39px","117px"],QuestMoney:["120px","390px"]},360:{SceneWidth:640,SceneHeight:1008,PieWidth:200,PieFontSize:20,PieFontSize2:13,PieHeight:220,PageWidth:"328px",PageHeight:"177px",PageTop:40,DetailPageTop:50,MsgTop:50,StockView:[300,240,230,150,15],EventMoney:["70px","220px"],SigninMoney:["50px","40px","110px"],QuestMoney:["120px","390px"]},320:{SceneWidth:640,SceneHeight:1008,PieWidth:180,PieFontSize:16,PieFontSize2:12,PieHeight:190,PageWidth:"290px",PageHeight:"177px",PageTop:50,DetailPageTop:60,MsgTop:40,StockView:[270,220,210,120,14],EventMoney:["70px","200px"],SigninMoney:["40px","40px","100px"],QuestMoney:["120px","390px"]}},SCREENKEY=640,SIZEPER=1,browser={versions:function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPhone5:e.indexOf("iPhone OS 6_1")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};initScreen(),getSizes=function(){return PageSizes[SCREENKEY]},log33=function(e){var t=document.getElementById("testpos");null==t&&(t=document.createElement("div"),div.id="testpos",document.body.appendChild(div)),t.innerHTML=e,t.style.color="black"},log=function(e){return void(g_msg&&g_msg.tip(e))},logerr=function(e){g_msg.open(e)},IsSameDay=function(e,t){var i=e.getMonth(),a=e.getDate(),n=e.getYear();return n==t.getYear()&&i==t.getMonth()&&a==t.getDate()},ForDight=function(e,t){var i=2;return t&&(i=t),e=Math.round(e*Math.pow(10,i))/Math.pow(10,i)},ForDight0=function(e){return e=Math.round(e*Math.pow(10,0))/Math.pow(10,0)},cfeval=function(jsonStr){return null==jsonStr||jsonStr.length<=0?null:eval("("+jsonStr+")")},cfrun=function(func){alert(func),null==func||func.length<=0||eval("("+func+"())")},mapIDs=function(e){var t=[];for(key in e)t.push(key);return t},myajax=function(url,dataParam,async){null==async&&(async=!1);var rsp=$.ajax({type:"post",url:"/cf/"+url+".do",data:dataParam,async:async});try{if(null!=rsp&&rsp.responseText.length>0)return eval("("+rsp.responseText+")")}catch(e){return document.write(e.name+" :  "+rsp.responseText),null}},findSigninLog=function(e){for(var t=new Date,i=g_player.data,a=0,n=0;7>n;n++){var s=i.playerid+"_"+t.toDateString();if(!e[s])break;a++,t.setDate(t.getDate()-1)}return a},obj2ParamStr=function(e,t){var i="";for(key in t)i.length>0&&(i+="&"),i+=e+"."+key+"="+t[key];return i},itemStr=function(e,t){for(var i="",a=0;a<e.length;a++){var n=e[a];0!=n.v&&(n.t==ITEM_TYPE.CASH?i+=n.v+ITEM_NAME.CASH+t:n.t==ITEM_TYPE.EXP&&(i+=n.v+ITEM_NAME.EXP+t))}return i},itemValue=function(e,t){for(var i=0,a=0;a<e.length;a++)if(e[a].t==t){i=e[a].v;break}return i},itemStr2=function(e,t){for(var i="",a=0;a<e.length;a++){var n=e[a];if(0!=n.v){var s=n.v;0>s&&(s=0-s),n.t==ITEM_TYPE.CASH?i+=s+"现金":n.t==ITEM_TYPE.EXP&&(i+=s+"经验"),a!=e.length-1&&(i+=t)}}return i},calculateTimeout=function(e,t){var i=e.createtime,a=Date.parse(new Date),n=(a-i)/36e5,s=t.period*e.qty*24,o=ForDight(s-n);return 0>o&&(o=0),o},timeoutDesc=function(e,t,i){var a="已到期",n=e.createtime,s=Date.parse(new Date),o=(s-n)/1e3,r=t.period*e.qty*60*60*24;1==i&&(r=t.period*e.qty*60*60);var l=r-o;return 0>=l?a:a=3600>l?"到期:<span style='color:red'>"+ForDight0(l/60)+"</span>分钟":86400>l?"到期:<span style='color:red'>"+ForDight0(l/3600)+"</span>小时":"到期:<span style='color:red'>"+ForDight0(l/86400)+"</span>天"};var pp=Date.parse(new Date);pp-=36e5;var pitem={createtime:pp,qty:1},item={period:1},tt=calculateTimeout(pitem,item);randomItems=function(e,t,i){var a=[];if(null==e||e.length<=0||0>=i)return a;e.length<i&&(i=e.length);var n=e.concat();if(null!=t&&t.length>0){if(t.length>=i)return t;for(var s=0;s<t.length;s++){a.push(t[s]);for(var o=0;o<n.length;o++)if(n[o]==t[s]){n.splice(o,1);break}}i-=t.length}for(var s=0;i>s;s++){var r=Math.floor(Math.random()*n.length);a.push(n[r]),n.splice(r,1)}return a};var HELP_DESC="★ 游戏目标<br>";HELP_DESC+="<p class='cfmsg_textsmall'>",HELP_DESC+="&nbsp;1.您可以通过游戏内容进行理财游戏，积累财富;<br>",HELP_DESC+="&nbsp;2.平安人寿每月将为排名靠前的用户发放活动奖励;<br>",HELP_DESC+="&nbsp;3.详情请关注平安人寿APP活动页面;<br>",HELP_DESC+="</p>",HELP_DESC+="★ 基本规则<br>",HELP_DESC+="<p class='cfmsg_textsmall'>",HELP_DESC+="&nbsp;1.每周为一个游戏回合，隔周财富不保存，仅记录本周结束时您的财富，用于月排名;<br>",HELP_DESC+="&nbsp;2.游戏中一年相当于真实时间一天;<br>",HELP_DESC+="&nbsp;3.您可以:<br>",HELP_DESC+="&nbsp;&nbsp;&nbsp;&nbsp;到平安银行进行存款理财;<br>",HELP_DESC+="&nbsp;&nbsp;&nbsp;&nbsp;到平安保险购买保险产品;<br>",HELP_DESC+="&nbsp;&nbsp;&nbsp;&nbsp;到股票交易所买卖股票;<br>",HELP_DESC+="</p>",HELP_DESC+="★ 游戏签到<br>",HELP_DESC+="<p class='cfmsg_textsmall'>",HELP_DESC+="&nbsp;1.您每天首次登陆后，点击签到界面的心情，可以进行签到;<br>",HELP_DESC+="&nbsp;2.您只要连续签到，则每天签到奖励会提升;<br>",HELP_DESC+="</p>",HELP_DESC+="<p style='text-align:right'><a onclick='g_help.nextpage(2)'>下一页</a></p>";var HELP_DESC2="★ 每日任务<br>";HELP_DESC2+="<p class='cfmsg_textsmall'>",HELP_DESC2+="1.您每天可以完成两个奖励丰厚的日常任务;<br>",HELP_DESC2+="2.日常任务为系统每天随机派送;<br>",HELP_DESC2+="</p>",HELP_DESC2+="★ 随机事件<br>",HELP_DESC2+="<p class='cfmsg_textsmall'>",HELP_DESC2+="1.每隔一段时间，会出现出现意外惊喜和意外风险;<br>",HELP_DESC2+="2.意外风险可以通过购买相对应的保险产品来避免意外损失;<br>",HELP_DESC2+="</p>",HELP_DESC2+="★ 排行榜<br>",HELP_DESC2+="<p class='cfmsg_textsmall'>",HELP_DESC2+="1.每周为一个回合，将记录您最后获得的财富值;<br>",HELP_DESC2+="2.活动期间我们会将每周财富进行排名;<br>",HELP_DESC2+="3.活动结束后，平安人寿将为排名靠前的用户发放活动奖励;<br>",HELP_DESC2+="4.您每天可以有10次机会为排行榜中的其他玩家点赞;<br>",HELP_DESC2+="</p>",HELP_DESC2+="<br><p style='text-align:right'><a onclick='g_help.nextpage(1)'>上一页</a></p>";var data_eventdata_feq=10,data_eventdata=[{name:"意外受伤",descs:"出门遭遇高空坠物",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:4},{name:"意外扭伤",descs:"乘坐公交车发生意外，扭伤脚",type:1,prize:"[{t:0,v:-1000},{t:1,v:0}]",itemid:4},{name:"意外受伤",descs:"乘坐的士发生意外，头部撞伤",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:4},{name:"意外烫伤",descs:"在家烧烤，意外烫伤",type:1,prize:"[{t:0,v:-800},{t:1,v:0}]",itemid:4},{name:"意外骨折",descs:"打篮球意外受伤，手臂骨折",type:1,prize:"[{t:0,v:-5000},{t:1,v:0}]",itemid:4},{name:"意外扭伤",descs:"海岸线穿越摔伤，脚踝扭伤",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:4},{name:"意外受伤",descs:"驾车出行，车辆相撞，头部受伤",type:1,prize:"[{t:0,v:-6000},{t:1,v:0}]",itemid:4},{name:"意外烫伤",descs:"户外烧烤，意外烫伤",type:1,prize:"[{t:0,v:-200},{t:1,v:0}]",itemid:4},{name:"度假受伤",descs:"乡下度假，被蜜蜂蛰伤",type:1,prize:"[{t:0,v:-500},{t:1,v:0}]",itemid:4},{name:"被宠物咬伤",descs:"晚上散步的时候被邻居狗狗咬伤",type:1,prize:"[{t:0,v:-1000},{t:1,v:0}]",itemid:4},{name:"财产意外损失",descs:"投资股市的股票被连续跌停",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"自营的店铺发生意外火灾",type:1,prize:"[{t:0,v:-10000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"在外出的时候家里爆水管，导致地板被泡",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"家里被盗，丢失笔记本电脑一台",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"您的小车昨天天晚上停放在路边，车窗损坏",type:1,prize:"[{t:0,v:-5000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"您的一张银行卡丢失，卡内现金被取走",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"您的支付宝密码被盗了",type:1,prize:"[{t:0,v:-4000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"您的信用卡在消费时被莫名盗刷",type:1,prize:"[{t:0,v:-5000},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"发快递丢失，损失",type:1,prize:"[{t:0,v:-500},{t:1,v:0}]",itemid:5},{name:"财产意外损失",descs:"电脑被破解，银行密码泄露",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:5},{name:"旅游意外损失",descs:"出国旅游相机被偷",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"周末登山意外摔倒扭到腿",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:6},{name:"旅游意外不适",descs:"西藏旅游高原反应",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"去内蒙古旅游，从马上摔下",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"出境旅游跳伞扭伤",type:1,prize:"[{t:0,v:-1800},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"日本旅游滑雪扭伤",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:6},{name:"旅游意外不适",descs:"海南潜水患减压病",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"出游蹦极肌肉拉伤",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"美国旅游时，心脏病发",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:6},{name:"旅游意外受伤",descs:"旅游期间交通意外受伤",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:6},{name:"突发疾病",descs:"急性肺炎，医疗费与误工费",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"急性胃炎，医疗费与误工费",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"食用隔夜食物得了急性肠胃炎",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"突然感冒发烧到39度",type:1,prize:"[{t:0,v:-500},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"外出就餐食物中毒",type:1,prize:"[{t:0,v:-1000},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"意外场合接触染上皮肤病",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"晚上空调开太低病毒性感冒",type:1,prize:"[{t:0,v:-2500},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"在人多场合被染上登革热",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"高温天气外出中暑了",type:1,prize:"[{t:0,v:-1800},{t:1,v:0}]",itemid:7},{name:"突发疾病",descs:"偶尔得伤风感冒",type:1,prize:"[{t:0,v:-2500},{t:1,v:0}]",itemid:7},{name:"交通意外",descs:"开车上班途中跟其他小车擦碰,付全部责任",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"过了保修期后汽车发动机故障，需要重大维修",type:1,prize:"[{t:0,v:-8000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"停车场发生火灾，车辆受损",type:1,prize:"[{t:0,v:-9000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"自家宝马放在停车场被划",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"自家奔驰出行，刹车不及，擦碰",type:1,prize:"[{t:0,v:-5000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"开车接送姑妈时发生交通事故，爆车胎",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"开车上班，途中发生事故，发动机故障",type:1,prize:"[{t:0,v:-1500},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"开车上班，途中发生事故，手臂受伤",type:1,prize:"[{t:0,v:-2000},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"开车接送邻居阿姨时发生交通事故，阿姨受伤",type:1,prize:"[{t:0,v:-2500},{t:1,v:0}]",itemid:8},{name:"交通意外",descs:"开车接送侄子时发生交通事故，侄子受伤",type:1,prize:"[{t:0,v:-3000},{t:1,v:0}]",itemid:8},{name:"意外收入",descs:"上一期足彩中了三等奖",type:0,prize:"[{t:0,v:3000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"坚持买福利彩票中了一等奖",type:0,prize:"[{t:0,v:5000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"彩票中二等奖",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"由于工作努力被公司评为本月最佳员工",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"参加中国好声音入围得到一笔奖金",type:0,prize:"[{t:0,v:2000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"平安答谢客户发放月饼卡",type:0,prize:"[{t:0,v:1000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"项目成功上线获得季度奖金",type:0,prize:"[{t:0,v:8000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"公司业绩上升获得年终绩效奖金",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"跟几个朋友打扑克赢钱",type:0,prize:"[{t:0,v:500},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"与同事周末打麻将赢钱",type:0,prize:"[{t:0,v:1500},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"帮同事代购得到辛苦钱",type:0,prize:"[{t:0,v:500},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"上饭店吃饭刮出幸运奖",type:0,prize:"[{t:0,v:200},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"老家种地时挖出珍贵文物",type:0,prize:"[{t:0,v:5000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"家传文物高价被拍卖",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"路边捡到彩票中奖",type:0,prize:"[{t:0,v:2000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"逛街路上捡到无人认领钱包",type:0,prize:"[{t:0,v:200},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"路边捡到房产证，归还失主，获得酬金",type:0,prize:"[{t:0,v:2000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"救了土豪一命，获得感谢金",type:0,prize:"[{t:0,v:8000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"世界杯赌球，获得奖金",type:0,prize:"[{t:0,v:1000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"刮发票中了特等奖",type:0,prize:"[{t:0,v:3000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"公司发放里程碑奖金",type:0,prize:"[{t:0,v:5000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"登革热肆虐，投资药品获得利润",type:0,prize:"[{t:0,v:8000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"变卖金饰，获得利润",type:0,prize:"[{t:0,v:2000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"倒卖房子，获得利润",type:0,prize:"[{t:0,v:8000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"生意上门，获得利润",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"淘古玩捡漏，低价得到好宝贝",type:0,prize:"[{t:0,v:10000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"卖出珍藏邮票，获得利润",type:0,prize:"[{t:0,v:5000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"收藏奇石，获得利润",type:0,prize:"[{t:0,v:6000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"情人节批发倒卖玫瑰花",type:0,prize:"[{t:0,v:2000},{t:1,v:0}]",itemid:1},{name:"意外收入",descs:"年末花市卖花，获得利润",type:0,prize:"[{t:0,v:3000},{t:1,v:0}]",itemid:1}],data_initdata=[{level:1,money:2e4,exp:0}],data_insuredata={1:{name:"乐享理财",type:1,price:3e3,profit:150,period:12,descs:"保险理财类产品，短期投入即可拥有一生的财富理财计划。"},2:{name:"智享理财",type:1,price:5e3,profit:400,period:24,descs:"保险理财类产品，短期投入即可拥有一生的财富理财计划。"},3:{name:"尊享理财",type:1,price:1e4,profit:1e3,period:24,descs:"保险理财类产品，短期投入即可拥有一生的财富理财计划。"},4:{name:"综合意外险",type:0,price:400,profit:200,period:24,descs:"投保后，在保险期间可以规避对应风险带来的损失"},5:{name:"财产保险",type:0,price:700,profit:2e3,period:24,descs:"投保后，在保险期间可以规避对应风险带来的损失"},6:{name:"旅游意外险",type:0,price:400,profit:200,period:24,descs:"投保后，在保险期间可以规避对应风险带来的损失"},7:{name:"健康保险",type:0,price:450,profit:1e3,period:24,descs:"投保后，在保险期间可以规避对应风险带来的损失"},8:{name:"平安车险",type:0,price:700,profit:1500,period:24,descs:"投保后，在保险期间可以规避对应风险带来的损失"}},data_questdata=[{id:1,name:"参保",descs:"购买一个保险产品",type:-1,prize:"[{t:0,v:5000}]"},{id:2,name:"投资理财",descs:"购买任何一支理财类保险产品,完成任务有额外的奖励",type:1,prize:"[{t:0,v:5000}]"},{id:3,name:"股票购买",descs:"购买任何一支股票",type:2,prize:"[{t:0,v:5000}]"},{id:4,name:"股票抛售",descs:"抛售任何一支股票",type:3,prize:"[{t:0,v:5000}]"},{id:5,name:"存款到银行",descs:"进行一次定期存款",type:4,prize:"[{t:0,v:5000}]"}],data_quotedata=[{name:"中国平安",quote:[[39142,50,50.97,46.79,45.8,1963748],[39143,47,47.44,46.4,45.88,424948],[39146,45.98,46.17,44.38,43.53,419196],[39147,44,46,45.28,43.75,297727],[39148,45.29,46.9,46.48,44.91,287463],[39149,46.1,46.33,45.93,45.68,130983],[39150,45.9,46.1,45.58,44.7,160843],[39153,45.3,45.3,44.71,44.5,145353],[39154,44.81,45.26,44.92,44.62,102319],[39155,44.3,45.1,44.91,43.79,173306],[39156,45.52,46.49,44.96,44.8,152368],[39157,44.99,45.95,45.21,44.4,227547],[39161,46.8,46.92,45.78,45.5,222e3],[39162,45.8,46,45.1,44.9,136728],[39163,45.45,45.92,45.37,45.23,167509],[39164,45.34,45.53,45.15,44.71,139810],[39167,45.2,46.2,45.92,45.18,223191],[39168,45.79,46.36,45.86,45.63,138759],[39169,45.9,46.9,46.58,45.58,258263],[39170,46.81,48.79,47.39,46.48,461766],[39171,46.96,47.87,47.1,46.72,144567],[39174,47.05,48.7,48.36,47.05,230596],[39175,48.42,48.76,48.21,47.9,132712],[39176,48.22,48.5,47.8,47.55,122383],[39177,47.8,48,47.91,47.2,122865],[39178,47.68,48.95,48.01,47.5,195207],[39181,48.09,51.89,51.61,47.7,462770],[39182,51,53.68,52.82,51,407823],[39183,52.88,55.18,53.5,52.6,243414],[39184,53.98,58,53.29,52.95,159269]]},{name:"中石油",quote:[[39391,48.6,48.62,43.97,41.7,15468692],[39392,41.4,42.4,39.99,39.8,3429778],[39393,39.7,40.73,40.43,38.28,2166188],[39394,39.2,39.75,38.2,38,1391055],[39395,37.85,38.39,38.18,36.66,1432266],[39398,36.99,37.75,36.45,36,1062707],[39399,37.05,37.94,37.03,36.5,1105321],[39400,37.73,39.55,38.88,37,1164185],[39401,38.3,38.5,37.91,37.8,782256],[39402,37.45,39.05,38.82,37.03,1004198],[39405,38.74,38.74,38.1,37.67,729184],[39406,37.6,37.97,37.44,36.86,742276],[39407,37.5,37.86,36.82,36.7,738966],[39408,36,36.37,35.11,35,936968],[39409,34.89,35.11,34.59,33.75,721263],[39412,35,35.18,33.76,33.7,791801],[39413,33.49,33.49,32.57,32.52,891657],[39414,32.66,32.99,32.15,31.9,843318],[39415,32.77,33.2,33.05,32.09,924777],[39416,32.75,32.75,31.52,31.5,1024156],[39419,30.98,30.98,30.44,30.3,824535],[39420,30.6,31.07,30.59,30.5,521182],[39421,30.6,31.8,31.45,30.34,770304],[39422,31.5,31.55,31.12,30.9,418548],[39423,31.1,31.5,31.31,30.66,520039],[39426,30.91,31.7,31.42,30.58,735731],[39427,31.46,32.16,31.91,31.46,666671],[39428,31.7,31.7,31.15,31,565691],[39429,31.09,31.09,30.53,30.5,581023],[39430,30.28,30.61,30.57,29.98,573893]]},{name:"万科A",quote:[[36529,9.8,10.4,10.3,9.6,45747],[36530,10.35,10.45,10.04,10,46137],[36531,10,10.6,10.51,9.85,71920],[36532,10.58,11,10.99,10.46,136349],[36535,10.68,11.44,11.44,10.55,142425],[36536,11.6,11.7,10.84,10.65,111362],[36537,10.79,11.12,10.46,10.39,46986],[36538,10.39,10.7,10.44,10.35,27679],[36539,10.6,10.6,10.03,10,18015],[36542,9.99,10.4,10.36,9.73,22500],[36543,10.33,10.39,10,9.94,26571],[36544,10,10.27,10.1,9.95,16990],[36545,10.06,10.4,10.28,10,32328],[36546,10.3,10.36,10.08,9.98,48987],[36549,10.07,10.1,9.89,9.8,53379],[36550,9.9,10.75,10.28,9.89,46071],[36551,10.15,10.29,10.14,10.05,19184],[36552,10.24,10.4,10.18,10.03,34508],[36553,10.18,10.78,10.55,10.16,62411],[36570,10.81,11.59,11.48,10.81,111663],[36571,11.51,12.2,11.25,10.96,184552],[36572,10.98,11.5,11.18,10.5,141667],[36573,11.25,12.3,12.3,11.25,618961],[36574,12.97,12.97,12.1,11.5,393038],[36577,12.36,13.31,13.31,12.36,511459],[36578,13.8,14.6,12.48,12.3,619034],[36579,13,13.49,12.95,12.01,378923],[36580,12.98,13.4,13.07,12.6,209095],[36581,13.1,13.23,12.77,12.6,169306],[36584,12.78,14,13.48,12.68,303506]]
},{name:"中兴通讯",quote:[[36529,28.6,30.5,29.89,28.55,15639],[36530,29.81,30.33,29.54,29.4,19238],[36531,29.08,32,31.54,29.08,29077],[36532,31.54,33.08,32.52,31.54,50050],[36535,32.88,33.08,32.89,31.55,31552],[36536,32.9,32.9,30.72,30.51,26021],[36537,30.81,31.48,29.27,29.01,17202],[36538,29.02,29.7,28.97,28.88,7822],[36539,29,29.28,28.14,28,13276],[36542,28.14,28.57,28.39,27.65,7224],[36543,28.4,28.7,28.16,28,5470],[36544,28.2,29.37,28.78,28,6459],[36545,28.88,30.1,29.5,28.8,10381],[36546,29.7,31.38,29.89,29.06,28077],[36549,29.99,30.94,30.31,29.51,17639],[36550,30.1,30.5,29.15,29,14434],[36551,29.08,29.31,28.69,28.48,13214],[36552,29.5,31.56,31.56,28.8,25988],[36553,33.01,34.2,32.71,31.95,64945],[36570,35,36.03,36.03,35,21018],[36571,38.8,39.63,37.48,37,89905],[36572,37.35,39.2,38.99,36.3,68855],[36573,39,40.99,35.09,35.09,68483],[36574,33,34.9,34.51,31.58,40607],[36577,34.6,34.9,32.33,32.3,33075],[36578,32,33.6,32,31.53,24176],[36579,31.7,32.5,31.01,30.95,21435],[36580,30.91,32.47,32.4,30.91,14419],[36581,32.5,32.67,31.9,31.5,16686],[36584,32,35,34.84,32,39405]]},{name:"长江电力",quote:[[37943,6.23,6.48,6.18,6.11,7538631],[37944,6.16,6.28,6.24,6.15,964873],[37945,6.23,6.35,6.32,6.19,784934],[37946,6.36,6.53,6.33,6.32,834985],[37949,6.32,6.67,6.67,6.32,676646],[37950,6.65,6.73,6.61,6.56,730715],[37951,6.61,6.73,6.62,6.56,305578],[37952,6.62,6.71,6.65,6.57,341844],[37953,6.67,6.86,6.82,6.67,464203],[37956,6.82,7.02,7,6.81,607152],[37957,7.02,7.06,7,6.97,496464],[37958,7,7.69,7.38,6.99,1236349],[37959,7.38,7.57,7.47,7.33,804969],[37960,7.47,7.55,7.47,7.32,658512],[37963,7.47,7.54,7.37,7.35,410392],[37964,7.36,7.57,7.54,7.36,529446],[37965,7.58,7.74,7.72,7.55,626045],[37966,7.76,7.82,7.6,7.49,817167],[37967,7.56,7.62,7.58,7.48,365842],[37970,7.58,7.59,7.52,7.47,305505],[37971,7.5,7.7,7.67,7.4,544100],[37972,7.61,7.78,7.56,7.55,487203],[37973,7.53,7.78,7.73,7.51,349822],[37974,7.77,8.09,7.99,7.76,867253],[37977,8.05,8.7,8.59,7.97,952951],[37978,8.6,8.74,8.69,8.54,623558],[37979,8.69,8.87,8.87,8.61,504271],[37980,8.89,9.05,8.82,8.71,594129],[37981,8.83,8.87,8.72,8.65,385690],[37984,8.68,8.77,8.62,8.59,326233]]},{name:"苏宁电器",quote:[[38189,29.88,33,32.66,29.7,202030],[38190,32.55,35.35,33.68,32.55,45557],[38191,33.5,35.94,35.8,33.5,32081],[38194,35.79,35.79,35,34.35,22970],[38195,34.99,35.2,34.5,33.52,14419],[38196,35.45,36.4,36.27,34.11,19247],[38197,36,36.79,36.09,35.61,12281],[38198,35.85,36.48,35.87,35.51,6930],[38201,36,38.7,37.64,35.9,17622],[38202,37.9,39.11,38.14,37.69,14812],[38203,37.88,39,38.09,36.8,11241],[38204,37.8,39.4,38.45,37.66,7224],[38205,38.49,39.6,38.8,38,7692],[38208,39.28,39.28,37.2,37,16222],[38209,36.88,39.1,38.33,36.88,9896],[38210,37.05,38.3,37.51,36.88,6752],[38211,37.4,38.28,37.5,37.2,4162],[38212,37.5,37.97,36.71,36.5,10099],[38215,36.6,36.6,36.1,35.86,8026],[38216,36.01,36.85,36.58,36,2858],[38217,36.4,36.57,36.26,36.01,2253],[38218,36.48,36.48,35.9,35.21,3740],[38219,36.05,36.05,35.01,33.9,10723],[38222,34.68,35.33,35.1,34.68,1435],[38223,34.8,35.4,35.1,34.8,1478],[38224,34.95,35.48,35.26,34.71,1132],[38225,35,35.55,35.2,34.75,2603],[38226,36,36,35.33,35.2,1598],[38229,35.35,35.36,35.2,34.36,2174],[38230,35.28,35.99,35.3,34.7,1297]]}],data_savingdata={1:{name:"活期",type:0,rate:.35,period:.083},2:{name:"半年期",type:1,rate:2.25,period:.5},3:{name:"1年期",type:2,rate:2.75,period:1},4:{name:"2年期",type:3,rate:3.35,period:2},5:{name:"3年期",type:4,rate:4,period:3},6:{name:"5年期",type:5,rate:4.75,period:5}},data_signindata=[{day:1,type:0,value:1e4,descs:"首日工资奖励"},{day:2,type:0,value:15e3,descs:"次日"},{day:3,type:0,value:2e4},{day:4,type:0,value:25e3},{day:5,type:0,value:3e4},{day:6,type:0,value:35e3},{day:7,type:0,value:4e4},{day:1,type:1,value:5,descs:"首日经验奖励"},{day:2,type:1,value:10,descs:"次日"},{day:3,type:1,value:15},{day:4,type:1,value:20},{day:5,type:1,value:25},{day:6,type:1,value:30},{day:7,type:1,value:35}],data_stockdata={1:{name:"上国平安",descs:"国内保险行业的蓝筹股",per:5},2:{name:"上石油",descs:"不要以为油费降价，石油股就不靠谱",per:5},3:{name:"百科A",descs:"买不起房，也可以当房子的主人！",per:10},4:{name:"上兴通讯",descs:"我们生产可以拍星星的手机噢！",per:12},5:{name:"黄河电力",descs:"水电水电，有水就有电",per:12},6:{name:"国宁电器",descs:"我是强力家电连锁",per:8},7:{name:"民盛银行",descs:"他们家有个强力老板",per:5},8:{name:"朝商银行",descs:"服务很好！真的服务很好！",per:5},9:{name:"星业银行",descs:"我是个商业银行！",per:10},10:{name:"上发银行",descs:"我是东方之珠的银行！",per:12},11:{name:"陆通证券",descs:"我是最强的证券公司~~~~~之一~",per:12},12:{name:"上信证券",descs:"首批综合证券公司之一",per:8},13:{name:"贵州古酒",descs:"我生产世界三大名酒~~之一！",per:5},14:{name:"农产银行",descs:"我是为农民服务的股票！",per:5},15:{name:"运输银行",descs:"近代以来延续历史最悠久、最古老的银行",per:7},16:{name:"工人银行",descs:"我拥有大陆最大的客户群",per:5},17:{name:"上国太保",descs:"我是老三，干不过上国人寿和上国平安。",per:5},18:{name:"伊牛股份",descs:"我是专业产牛奶的，放心奶！",per:10},19:{name:"上国神华",descs:"我是能源股！",per:12},20:{name:"上国建筑",descs:"我是国有地产公司！",per:12},21:{name:"浦汽集团",descs:"我生产很牛逼的汽车",per:8},22:{name:"大琴铁路",descs:"其实我是运煤用的",per:5},23:{name:"京城银行",descs:"京城的银行，都是有背景的",per:5},24:{name:"广大银行",descs:"银行、证券、保险、投资管理，俺啥都做！",per:7},25:{name:"神州银行",descs:"大陆第五家上市银行",per:5},26:{name:"大钢稀土",descs:"顾名思义，我做稀土矿的",per:5},27:{name:"田螺水泥",descs:"我是和稀泥的！",per:10},28:{name:"上国石化",descs:"我是特大型石油石化企业集团",per:12},29:{name:"宝利地产",descs:"买我买我，跟买房没区别！",per:12},30:{name:"上国重工",descs:"其实我主要是修船的",per:8},31:{name:"国电南电",descs:"我要放电了！",per:5},32:{name:"健美药业",descs:"药业其实也产医疗器械！",per:5},33:{name:"上国联通",descs:"我在纽约、香港、上海三地同时上市业噢！",per:7},34:{name:"朝商证券",descs:"我是朝商银行他哥！",per:5},35:{name:"广聚能源",descs:"“能源开发、汽车服务、房产置业”这些我都做！",per:5},36:{name:"万视通",descs:"IPTV懂么！视听业务运营商服务商！",per:10},37:{name:"华秦证券",descs:"我是老牌券商",per:12},38:{name:"尚港集团",descs:"港口企业我是老大",per:12},39:{name:"方圆证券",descs:"我是老牌综合类证券公司",per:8},40:{name:"上国人寿",descs:"国内最大的商业保险集团……之一",per:5},41:{name:"紫晶矿业",descs:"以黄金及基本金属矿产资源勘查和开发为主的矿业集团",per:7},42:{name:"鑫华保险",descs:"我是行业领先的、具有较大品牌影响力的寿险公司之一",per:5},43:{name:"九一重工",descs:"我是工程机械制造商",per:10},44:{name:"百云山",descs:"我卖的都是良心药",per:12},45:{name:"大钢股份",descs:"钢铁冶炼行业我在行",per:12},46:{name:"山中黄金",descs:"冶金我在行",per:8},47:{name:"上金黄金",descs:"我是黄金第一股",per:5},49:{name:"江西铜矿",descs:"我其实是做有色金属的，不止铜矿",per:7},50:{name:"陆安环能",descs:"我才不是煤老板！",per:5},51:{name:"闵厦钨业",descs:"我是最大的钨钼产品生产与出口企业",per:5}},data_titledata=[{id:1,name:"新手上路",desc:"无需描述",exp:0,level:1},{id:2,name:"炒股小虾",desc:"无需描述",exp:80,level:2},{id:3,name:"后起之秀",desc:"无需描述",exp:120,level:3},{id:4,name:"理财能手",desc:"无需描述",exp:190,level:4},{id:5,name:"理财高手",desc:"无需描述",exp:310,level:5},{id:6,name:"理财奇侠",desc:"无需描述",exp:500,level:6},{id:7,name:"无双隐士",desc:"无需描述",exp:780,level:7},{id:8,name:"世外高人",desc:"无需描述",exp:1170,level:8},{id:9,name:"理财圣手",desc:"无需描述",exp:1690,level:9},{id:10,name:"点石成金",desc:"无需描述",exp:2360,level:10}];PageUtil=function(e,t,i){this.id=e;var a="";a+="<div class='modal fade' id='"+e+"'",a+=t>0?" style='z-index:"+t+"'>":">",a+="<div class='modal-dialog' id='"+e+"_dialog'>",a+=i&&i.length>0?"<div class='"+i+"'>":"<div class='modal-content'>";var n="";n+="</div>",n+="</div>",n+="</div>",this.header="<div class='modal-header'>",this.content="",this.head=a,this.footer=n},PageUtil.prototype.buildSingleTab=function(e,t){var i="<ul id='"+this.id+"Tab' class='nav nav-tabs'>";i+="<div class='cf_title_bg' onclick='g_"+t+".onClickHead()'><img src='static/img/"+e+"' class='cf_title'></div>","signin"!=t&&(i+="<button type='button' class='close' data-dismiss='modal'><img src='static/img/close.png' class='cf_title_close'></button>"),i+="</ul>",this.addHeader(i)},PageUtil.prototype.addHeader=function(e){this.header+=e},PageUtil.prototype.addContent=function(e){this.content+=e},PageUtil.prototype.toString=function(){var e=this.head+this.header+"</div>"+this.content+this.footer;return e},PageUtil.prototype.buildMsg=function(e){var t="<div class='messager messager-example messager-info'>";t+="<div class='messager-content' id='"+e+"'></div>",t+="<button class='close-messager'>&times;</button></div>",this.addContent(t)},Datamgr=function(){},Datamgr.prototype={buildHTML:function(){if("saving"!=this.name){var e=new PageUtil(this.tagname),t="title_"+this.name+".png";e.buildSingleTab(t,this.name);var i="<div class='tab-pane in active'>",a="cfpage ";"bank"==this.name?a+="bank":"playerinfo"==this.name&&(a+="player"),i+="<div class='"+a+"' id='"+this.pagename+"'>",i+="</div></div>",e.addContent(i),document.write(e.toString())}var e=this;$("#"+this.tagname).on("hide.zui.modal",function(){e.onClose&&e.onClose()});var n=document.getElementById(this.tagname+"_dialog");n&&(n.style.setProperty("width",getSizes().PageWidth),n.style.setProperty("height",getSizes().PageHeight));var s=new PageUtil(this.tagdetailname),o="";o="saving"==this.name?"small saving":"event"==this.name?"small":this.name,a="cfpagedetail "+o,i="<div class=\"tab-pane in active\" id='quest2'>",i+="<div class='"+a+"' id='"+this.pagedetailname+"'>",i+="</div></div>",s.addContent(i),document.write(s.toString());var r=document.getElementById(this.tagdetailname+"_dialog");r&&r.style.setProperty("height",getSizes().PageHeight)},buildPaging:function(e,t,i,a){var n="",s=parseInt(t/this.pageCount),o=t%this.pageCount;if(o>0&&s++,1==s)return n;var r="g_"+this.name+".buildPage";i&&(r=i),n+="        <div width='90%'>",n+=null==a?"<input type='button' class='cf_bt pagingleft' value='上一页' onclick='"+r+"("+(e-1)+")'/>":"<input type='button' class='cf_bt pagingleft' value='上一页' onclick='"+r+"("+a+","+(e-1)+")'/>",n+="<span class='cf_paging'>"+(e+1)+"/"+s+"</span>";var l="";return s>e+1&&(l=null==a?" onclick='"+r+"("+(e+1)+")'":" onclick='"+r+"("+a+","+(e+1)+")'"),n+="<input type='button' class='cf_bt pagingright' "+l+" value='下一页'/>",n+="           </div>  "},onClose:function(){playAudioHandler("close1");var e=document.getElementById("tag"+this.name);e&&this.name!=g_playerinfo.name&&(e.innerHTML="")},loadServerData:function(){alert("999"+this.name),log("9999999")},onClickHead:function(){},update:function(){null==this.count&&(this.count=0),this.count+=1,this.count%this.syncDuration==0&&null!=this.syncData&&this.syncData()},hide:function(e){playAudioHandler("close1"),null==e?$("#"+this.tagname).modal("hide"):$("#"+e).modal("hide")},onclick:function(e,t){var i=document.getElementById("tag"+this.name);if(i&&this.name!=g_playerinfo.name){var a="g_"+this.name,n="cf"+this.name+"_clickon";i.innerHTML="<img src='static/img/icon_"+this.name+"_on.png' onclick='"+a+".onclick()' class='"+n+"'>"}this.show()},show:function(){var e=new Date;e.getSeconds(),e.getMilliseconds();this.buildPage(0),playAudioHandler("open1"),$("#"+this.tagname).modal({position:getSizes().PageTop,show:!0});var t=new Date;t.getSeconds(),t.getMilliseconds()},onPanelClick:function(e){var t=this.name+"_d";if(null!=this.lastClickId){var i=document.getElementById(t+this.lastClickId);null!=i&&(i.style.background="url('static/img/panel_bg.png') no-repeat")}var a=document.getElementById(t+e);a.style.background="url('static/img/panel_click.png') no-repeat",this.lastClickId=e},findItem:function(e){for(var t,i=store.get(this.name),a=0;a<i.length;a++)if(i[a].id==e){t=i[a];break}return t},confirmBuy:function(e,t,i){if(0==t)return void g_msg.tip(this.cname+"购买","数量不能为零!");var a=store.get(this.name)[e];if(!a)return void g_msg.tip("找不到"+this.name+"数据");var n=0;if(n=i&&i>0?i:a.price,t>0){var s=n*t,o=g_player.saving[1].amount;if(s>o)return void g_msg.tip("您的现金不够，购买失败!")}else{if("stock"!=this.name)return;var r=g_player.getStockItem(e);if(r.qty<0-t)return void g_msg.tip("持有数量少于您抛售数量!")}this.reqBuy(e,t,n)},buy:function(e,t,i){var a=g_player.buyItem(this.name,e,t,i);if(1==a.ret){var n=a.item;t>0?g_msg.tip("购买<span style='color:red'>"+n.name+"</span>成功,金额:"+n.amount):g_msg.tip("抛售<span style='color:red'>"+n.name+"</span>成功,金额:"+(0-n.amount)),"insure"==this.name?this.closeDetail():this.showDetail(e,!0),this.buildPage(this.currPage)}}},Datamgr.prototype.constructor=Datamgr,Map=function(e,t){this.name="map",this.m_pos={x:0,y:0},this.m_imgScale=1,this.m_canvas=t,this.m_mapId=e,this.m_mapImg=null,this.m_imgs=[]},Map.prototype.init=function(e,t){this.m_width=e,this.m_height=t;var i=this,a=this.m_canvas,n=this.m_pos,s=game_imgs[0];windowToCanvas=function(e,t){var i=a.getBoundingClientRect();return{x:e-i.left-(i.width-a.width)/2,y:t-i.top-(i.height-a.height)/2}},resetPos=function(e,t){var i=e,n=t;return e>=0?i=0:s.width+e<a.width&&(i=a.width-s.width),t>=0?n=0:s.height+t<a.height&&(n=a.height-s.height),{x:i,y:n}},a.onclick=function(e){for(var t=e.clientX-n.x,a=e.clientY-n.y,s=i.m_imgs,o=0;o<s.length;o++){var r=s[o];if("map"!=r.name){var l=parseInt(r.x*SIZEPER),c=parseInt(r.y*SIZEPER),p=parseInt(r.img.width*SIZEPER),g=parseInt(r.img.height*SIZEPER);if(t>=l&&t<=p+(l-n.x)&&a>=c&&a<=g+(c-n.y)){i.onclick(r,t,a);break}}}},a.onmousewheel=function(e){alert("onmousewheel")},a.onmousedown=function(e){a.style.cursor="move";var t=windowToCanvas(e.clientX,e.clientY);a.onmousemove=function(e){var a=windowToCanvas(e.clientX,e.clientY),s=a.x-t.x,o=n.x+s,r=a.y-t.y,l=n.y+r,c=resetPos(o,l);(c.x!=n.x||c.y!=n.y)&&(n.x=c.x,n.y=c.y,t=a,i.draw())},a.onmouseup=function(){a.onmousemove=null,a.onmouseup=null,a.style.cursor="default"}},a.onmousewheel=a.onwheel=function(e){var t=windowToCanvas(e.clientX,e.clientY);e.wheelDelta=e.wheelDelta?e.wheelDelta:-40*e.deltaY,e.wheelDelta>0?(i.m_imgScale*=2,n.x=2*n.x-t.x,n.y=2*n.y-t.y):(i.m_imgScale/=2,n.x=.5*n.x+.5*t.x,n.y=.5*n.y+.5*t.y),i.draw()}},Map.prototype.enter=function(e){this.m_imgs=game_imgs,this.m_imgs.push(e);var t=this;this.m_imgs.sort(this.sortImg);for(var i=game_imgs,a=0;a<i.length;a++){var n=new Image;if(n.src=i[a].src,n.onload=function(){t.draw()},i[a].img=n,1==i[a].hasDiv){var s=document.createElement("DIV");s.id="tag"+i[a].name,s.className="cfpage_text "+i[a].name,i[a].zindex&&(s.style.zIndex=i[a].zindex),document.body.appendChild(s)}g_game.enter=!0}},Map.prototype.addImg=function(e){var t=this,i=new Image;this.m_imgs.push(e),this.m_imgs.sort(this.sortImg),i.src=e.src,i.onload=function(){t.draw()},e.img=i},Map.prototype.removeImg=function(e){for(var t=0;t<this.m_imgs.length;t++)if(this.m_imgs[t].name==e.name){this.m_imgs.splice(t,1);break}},Map.prototype.findImg=function(e){for(var t=0;t<this.m_imgs.length;t++)if(this.m_imgs[t].name==e)return this.m_imgs[t]},Map.prototype.sortImg=function(e,t){return null==e.zindex&&(e.zindex=1),null==t.zindex&&(t.zindex=1),e.zindex-t.zindex},Map.prototype.draw=function(){if(g_game.currImgCount++,!(g_game.currImgCount<g_game.imgCount)){g_game.currImgCount=0;var pos=this.m_pos,scale=this.m_imgScale,canvas=this.m_canvas,context=canvas.getContext("2d");context.clearRect(0,0,canvas.width,canvas.height);for(var i=0;i<this.m_imgs.length;i++){var img=this.m_imgs[i].img,newx=this.m_imgs[i].x,newy=this.m_imgs[i].y;1!=this.m_imgs[i].abs&&(newx=pos.x+this.m_imgs[i].x,newy=pos.y+this.m_imgs[i].y),context.drawImage(img,0,0,img.width,img.height,newx,newy,img.width*scale,img.height*scale)}if(null!=g_game.drawCallback){var aa=g_game.drawCallback;eval("("+aa+"())"),g_game.drawCallback=null}}},Map.prototype.update=function(){return},Map.prototype.onclick=function(e,t,i){var a=g_game.sys[e.name];null!=a?a.onclick(t,i):g_login.onImgClick(e)},Scene=function(e){this.name="scene",this.m_x=0,this.m_y=0},Scene.prototype.init=function(e){this.m_map=new Map(12,e),this.m_map.init()},Game=function(){this.name="game",this.currImgCount=0,this.count=1,this.syncDuration=6,this.mm={aa:"ss",bb:"ssb"},this.sys={}},Game.prototype=new Datamgr,Game.prototype.init=function(e){var t=store.get(this.name);if(null==t){var i=[{id:1,dataLoaded:!0,createtime:Date.parse(new Date)}];store.set(this.name,i)}this.m_scene=new Scene;var a=this.m_scene;a.init(e);setInterval(function(){g_game.update()},UpdateDuration),this.register(g_insure),this.register(g_title),this.register(g_quest),this.register(g_playerinfo),this.register(g_toplist),this.register(g_stock),this.register(g_bank),this.register(g_help),this.register(g_login),g_login.init()},Game.prototype.enter=function(e){this.imgCount=game_imgs.length+1,this.m_scene.m_map.enter(e)},Game.prototype.onEnter=function(){g_insure.onEnter(),g_stock.onEnter();var e=document.createElement("div");e.className="cfbank_div",e.innerHTML="<img class='cficon_bank' src='static/img/icon_bank.png' onclick='g_bank.onclick()'>",document.body.appendChild(e);var t=document.createElement("div");t.className="cfstock_div",t.innerHTML="<img class='cficon_stock' src='static/img/icon_stock.png' onclick='g_stock.onclick()'>",document.body.appendChild(t);var i=document.createElement("div");i.className="cfinsure_div",i.innerHTML="<img class='cficon_insure' src='static/img/icon_insure.png' onclick='g_insure.onclick()'>",document.body.appendChild(i),carAni1(),carAni2(),carAni3(),this.register(g_event)},Game.prototype.register=function(e){this.sys[e.name]=e},Game.prototype.addImg=function(e,t,i){this.imgCount=t,this.drawCallback=i,this.m_scene.m_map.addImg(e)},Game.prototype.removeImg=function(e){this.m_scene.m_map.removeImg(e)},Game.prototype.syncData=function(){},Game.prototype.update=function(){this.count++,this.m_scene.m_map.update(),this.count%this.syncDuration==0&&this.syncData();for(key in this.sys)this.sys[key].update()},Toplist=function(){this.name="toplist",this.pageCount=5,this.currPage=0,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.pageheader=this.tagname+"header",this.zandata=this.name+"zan",this.weekdata=[],this.monthdata=[],this.syncDuration=5},Toplist.prototype=new Datamgr,Toplist.prototype.init=function(){var e=store.get(this.zandata);null==e&&store.set(this.zandata,{}),this.buildHTML2()},Toplist.prototype.buildHTML2=function(){var e=new PageUtil(this.tagname);e.addHeader("<button type='button' class='close' data-dismiss='modal'><img src='static/img/close.png' class='cf_title_close top'></button>");var t="<ul id='"+this.id+"Tab' class='nav nav-tabs'>";t+="<div id='"+this.pageheader+"'></div>",t+="</ul>",e.addHeader(t);var i="<div class='tab-pane in active' id='quest1'>";i+="<div class='cfpage' id='"+this.pagename+"'>",i+="</div></div>",e.addContent(i),document.write(e.toString()),e=this,$("#"+this.tagname).on("hide.zui.modal",function(){e.onClose&&e.onClose()});var a=document.getElementById(this.tagname+"_dialog");a&&(a.style.setProperty("width",getSizes().PageWidth),a.style.setProperty("height",getSizes().PageHeight))},Toplist.prototype.buildPage=function(e){var t="<button class='cf_title_bg moff' onclick='g_toplist.showToplist(1,0)'></button>";t+="<button class='cf_title_bg won'></button>";var i=document.getElementById(this.pageheader);i.innerHTML=t,this.syncData2(),this.currPage=e},Toplist.prototype.showToplist=function(e,t){if(!(0>t)){playAudioHandler("open1");var i,a="";0==e?(i=this.weekdata,a+="<button class='cf_title_bg moff' onclick='g_toplist.showToplist(1,0)'></button>",a+="<button class='cf_title_bg won'></button>"):1==e&&(i=this.monthdata,a+="<button class='cf_title_bg woff' onclick='g_toplist.showToplist(0,0)'></button>",a+="<button class='cf_title_bg mon'></button>");var n=document.getElementById(this.pageheader);n.innerHTML=a;var s="";if(i.length<=0)s+="<div class='cfpanel' ID='insure_d1'>目前还没有排名数据",s+="</div>";else{s+="<div class='cf_top'>",s+="        <table class='cf_top_header'>",s+="             <tr>",s+="               <td class='cftoplist_content'>昵称</td>",s+="               <td class='cftoplist_content'>资产</td>",s+="               <td class='cftoplist_c4'>排名</td>",s+="               <td class='cftoplist_c3'>赞</td>",s+="              </tr>",s+="          </table>",s+="        <table>";var o=i[i.length-1],r=g_player.getTotal(g_player);o.money=r.total,0==e&&o.top!=g_player.data.weektop&&(g_player.data.weektop=o.top,g_player.flushPageview());var l=[];l.push(o);for(var c=0;c<i.length-1;c++){var p=i[c];if(p.playerid!=o.playerid){for(p.top=c+1,j=0;j<l.length;j++)if(l[j].money==p.money){p.top=l[j].top;break}l.push(p)}}var g=t*this.pageCount,d=(t+1)*this.pageCount;d>l.length&&(d=l.length);for(var c=g;d>c;c++){var p=l[c];if(0==c){var m="无",u=!1;p.top>0&&(m=p.top,p.top<=3&&(u=!0)),s+="             <tr>",s+="               <td class='cftoplist_content' style='color:yellow'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+p.playername.substring(0,8)+"</div></td>",s+="               <td class='cftoplist_c5' style='color:yellow'><div class='cficon_money toplist' onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+parseInt(p.money)+"</div></td>",s+=1==u?"               <td class='cftoplist_c4' style='color:yellow'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'><img class='cftoplist_top' src='static/img/icon_top_"+m+".png'></div></td>":"               <td class='cftoplist_c4' style='color:yellow'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+m+"</div></td>",s+="               <td class='cftoplist_c3' style='color:yellow'><div onclick='g_toplist.zan("+t+","+p.playerid+")'",s+=p.playerid!=o.playerid||Is_InBrowser?"<input type='button' class='cf_top_zan'/><span class='cftoplist_c6'>*<span id='zan_"+p.playerid+"'>"+p.zan+"</span></span>":"<input type='button' class='cf_top_share'/><span class='cftoplist_c6'>&nbsp;<span id='zan_"+p.playerid+"'>"+p.zan+"</span></span>",s+="</div></td>",s+="              </tr>"}else s+="             <tr>",s+="               <td class='cftoplist_content'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+p.playername.substring(0,8)+"</div></td>",s+="               <td class='cftoplist_c5'><div class='cficon_money toplist' onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+parseInt(p.money)+"</div></td>",s+=p.top<=3?"               <td class='cftoplist_c4'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'><img class='cftoplist_top' src='static/img/icon_top_"+p.top+".png'></div></td>":"               <td class='cftoplist_c4'><div onclick='g_playerinfo.showOneInfo("+p.playerid+")'>"+p.top+"</div></td>",s+="               <td class='cftoplist_c3'><div onclick='g_toplist.zan("+t+","+p.playerid+")'<input type='button' class='cf_top_zan'/><span class='cftoplist_c6'>*<span id='zan_"+p.playerid+"'>"+p.zan+"</span></span></div></td>",s+="              </tr>";s+="             <tr>",s+="               <td colspan='4'><img src='static/img/top_line.png'></td>",s+="              </tr>"}s+="          </table>",s+="</div>",this.currPage=t,s+=this.buildPaging(t,l.length,"g_toplist.showToplist",e)}var v=document.getElementById(this.pagename);v.innerHTML=s}},Toplist.prototype.zan=function(e,t){if(t==g_player.data.playerid)return void(Is_InBrowser?g_msg.tip("不能给自己点赞"):g_share.doShare());var i=new Date,a=store.get(this.zandata),n=g_player.data.playerid+"_"+i.getFullYear()+"-"+i.getMonth()+"-"+i.getDate(),s=a[n];if(null==s)s=[];else{if(s.length>=ZAN_COUNT)return void g_msg.tip("每天点赞不能多于"+ZAN_COUNT+"次");for(var o=0;o<s.length;o++)if(s[o]==t)return void g_msg.tip("您每天只能对一个人点赞1次")}var r=document.getElementById("zan_"+t),l=parseInt(r.innerHTML)+1;try{var c="toplist.playerid="+t+"&toplist.zan="+l;$.ajax({type:"post",url:"/cf/toplist_zan.do",data:c})}catch(p){document.write(p.name)}for(var o=0;o<g_toplist.weekdata.length;o++)if(g_toplist.weekdata[o].playerid==t){g_toplist.weekdata[o].zan=l;break}for(var o=0;o<g_toplist.monthdata.length;o++)if(g_toplist.monthdata[o].playerid==t){g_toplist.monthdata[o].zan=l;break}r.innerHTML=l,s.push(t),a[n]=s,store.set(this.zandata,a)},Toplist.prototype.syncData2=function(){g_msg.showload("g_toplist.syncData2");try{var e="playerid="+g_player.data.playerid;$.ajax({type:"post",url:"/cf/toplist_get.jsp",data:e,success:function(e){var t=cfeval(e);t.length>0&&(g_toplist.weekdata=t[0],g_toplist.monthdata=t[1]),g_toplist.showToplist(0,0),g_msg.destroyload()}})}catch(t){logerr(t.name)}};var g_toplist=new Toplist;g_toplist.init(),Share=function(){this.name="share",this.cname="分享",this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page"},Share.prototype=new Datamgr,Share.prototype.init=function(){var e=store.get(this.name);null==e&&store.set(this.name,{}),this.buildHTML()},Share.prototype.buildHTML=function(){var e=new PageUtil(this.tagname);content="<div class=\"tab-pane in active\" id='quest2'>",content+="<div class='cfpagedetail small' id='"+this.pagename+"'>",content+="</div></div>",e.addContent(content),document.write(e.toString());var t=document.getElementById(this.tagname+"_dialog");t&&t.style.setProperty("height",getSizes().PageHeight)},Share.prototype.buildPage=function(e){var t="<div style='cfevent_content'>";t+="<div style='margin: auto;text-align:center;'>"+Share_PageText+"</div>",t+="</div>",t+="<br><br>",t+="<div>"+Share_PageText2+"</div>";var i="        <div style='margin: auto;text-align:center;'>";i+="<div class='cfmsg_h2'>游戏分享</div>",i+="<br>",i+="            <div class='cfmsg_text'>"+t+"</div>",i+="           <button class='cf_bt bt_cancel' onclick='g_share.close()'>取消</button>",i+="  <button class='cf_bt' onclick='g_share.doShare()'>分享</button>",i+="             </div>";var a=document.getElementById(this.pagename);a.innerHTML=i},Share.prototype.doShare=function(){showShareMenuClickHandler()},Share.prototype.shareComplete=function(){var e=g_playerlog.findlogkey(),t=store.get(this.name);if(t[e])return void g_msg.tip("分享成功");playAudioHandler("open1");var i="<div style='cfevent_content'>";i+="<br><div style='margin: auto;text-align:center;'>分享成功</div>",i+="</div>",i+="<br><br>",i+="<div>"+Share_PageText_Prize+"</div>";var a="        <div style='margin: auto;text-align:center;'>";a+="<div class='cfmsg_h2'>游戏分享</div>",a+="<br>",a+="            <div class='cfmsg_text'>"+i+"</div>",a+="  <button class='cf_bt' onclick='g_share.sharePrize()'>确认</button>",a+="             </div>";var n=document.getElementById(this.pagename);n.innerHTML=a,$("#"+this.tagname).modal({position:getSizes().PageTop,show:!0})},Share.prototype.sharePrize=function(){var e=[{t:0,v:Share_Prize}];g_player.prize(e),playAudioHandler("money");var t=g_playerlog.findlogkey(),i=store.get(this.name);i[t]=!0,store.set(this.name,i),g_share.close()},Share.prototype.close=function(e){playAudioHandler("close1"),$("#"+this.tagname).modal("hide")};var g_share=new Share;g_share.init(),Playerinfo=function(){this.name="playerinfo",this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.pageheader=this.tagname+"header",this.graphName=this.name+"graph"},Playerinfo.prototype=new Datamgr,Playerinfo.prototype.init=function(){this.buildHTML()},Playerinfo.prototype.show=function(){this.showInfo(g_player)},Playerinfo.prototype.showInfo=function(e){playAudioHandler("open1");var t=(store.get("exp"),g_title.getLevel(e.data.exp)),i=e.data.exp/g_title.getData(t+1).exp;i=parseInt(100*i),i>100&&(i=100);var a="<div class='cfplayer_panel'>";a+="<table>",a+=" <tr>",a+="  <td width='100'>",a+=" <div class='cfplayer_head_bg'>",a+="<img src='"+head_imgs[e.data.sex].src+"'/>",a+=" </div>",a+="</td>",a+="   <td>",a+=" <div class='cfplayer_panel_text'> ",a+="<table class='cfinfo_tabl'>",a+="<tr><td>昵&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp称: </td><td> <span style='color:yellow'>"+e.data.playername.substring(0,10)+"</span>	</td></tr>",a+="<tr><td><div class='cfplayer_info3'>当前等级:</div> </td><td> <span style='color:yellow'>"+t+"</span> "+g_title.getData(t).name+"</td></tr>",a+="<tr><td>下一等级: </td><td> <span style='color:yellow'>"+(t+1)+"</span> "+g_title.getData(t+1).name+"</td></tr>",a+="<tr><td> 经&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp验: </td>",a+="<td><div class='cfinfo_exp_bg'><div class='cfinfo_exp_img' id='cfinfo_exp_img' style='width:"+i+"%'></div>",a+="<div class='cfinfo_exp'><span style='color:yellow'>"+e.data.exp+"</span>/"+g_title.getData(t+1).exp+"</div></div></td></tr>",a+="<tr><td>当周排名: </td><td> <span style='color:yellow'>"+e.data.weektop+"</span></td></tr>",a+=" </table>",a+=" </div>",a+="</td>",a+=" </tr>",a+="</table>",a+=" </div>";var n=g_player.getTotal(e);a+="<div class='cfplayer_info'>",a+="<table>",a+=" <tr>",a+="  <td class='cfplayer_info2'>",a+="<div class='cfprop p1'>定期存款<br>"+n.saving2+"</div>",a+="<div class='cfprop p2'>投资股票<br>"+n.stock+"</div>",a+="<div class='cfprop p3'>投资保险<br>"+n.insure+"</div>",a+="<div class='cfprop p4'>活期存款<br>"+n.saving+"</div>",a+="<div class='cfprop p5'>总资产值<br>"+n.total+"</div>",a+="</td>",a+="   <td>",a+="<div id='"+this.graphName+"' class='cfplayer_pie'></div>",a+="</td>",a+=" </tr>",a+="</table>",a+=" </div>";var s=document.getElementById(this.pagename);s.innerHTML=a,this.showPie(n,this.graphName),$("#"+this.tagname).modal({position:getSizes().PageTop,show:!0})},Playerinfo.prototype.showPie=function(e,t){var e=[{name:"定期",value:e.saving2,color:"#00ae57"},{name:"股票",value:e.stock,color:"#51d344"},{name:"保险",value:e.insure,color:"#ff4400"},{name:"活期",value:e.saving,color:"#2894B8"}];new iChart.Pie3D({render:t,data:e,title:{text:"资产分布",fontsize:getSizes().PieFontSize,offsety:30,color:"#ffffff"},sub_option:{mini_label_threshold_angle:20,mini_label:{fontsize:getSizes().PieFontSize2,fontweight:600,color:"#000000"},label:{background_color:null,sign:!1,padding:"0 1",border:{enable:!1,color:"#666666"},fontsize:getSizes().PieFontSize2,fontweight:600,color:"#000000"}},border:{enable:!1},padding:5,background_color:"#275868",showpercent:!0,animation:!0,decimalsnum:1,offset_angle:75,width:getSizes().PieWidth,height:getSizes().PieHeight,radius:140}).draw()},Playerinfo.prototype.showOneInfo=function(e){if(e&&(g_playerinfo.showPlayerId=e),g_playerinfo.showPlayerId){g_msg.showload("g_playerinfo.showOneInfo");try{$.ajax({url:"/cf/toplist_getinfo.jsp?playerid="+g_playerinfo.showPlayerId,success:function(e){var t=cfeval(e);if(null!=t){var i={};i.data=t,t.saving&&(i.saving=cfeval(t.saving)),t.stock&&(i.stock=cfeval(t.stock)),t.insure&&(i.insure=cfeval(t.insure)),g_playerinfo.showPlayerId=null,g_playerinfo.showInfo(i)}g_msg.destroyload()}})}catch(t){return logerr(t.name+" :  "+dataobj.responseText),!1}}};var g_playerinfo=new Playerinfo;g_playerinfo.init(),Login=function(){this.name="login",this.count=0,this.syncDuration=5,this.data={},this.loginPlayerid=-1,this.isLogin=!1,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.pageheader=this.tagname+"header"},Login.prototype=new Datamgr,Login.prototype.init=function(){var e=store.get(this.name);null==e&&(store.set(this.name,[]),e=store.get(this.name));for(var t=0;t<e.length;t++){var i=e[t];if(i.openid==g_openid){g_username=i.playername,this.sex=i.sex;break}}null!=g_username?this.login():this.draw()},Login.prototype.draw=function(){for(var e=store.get(this.name),t=null,i=0;i<e.length;i++){var a=e[i];if(a.openid==g_openid){t=a;break}}var n=login_imgs;if(null!=t){this.sex=t.sex;var s=this.choseBorderImg(t.sex);n.push(s),this.loginPlayerid=t.playerid}for(var i=0;i<n.length;i++){var o=n[i];if(g_game.addImg(o,n.length,"g_login.drawCallback"),"inputnick"==o.name){var r=document.createElement("div");r.id="inputnickdiv";var l=Login_InputDft;t&&t.playername?l=t.playername:g_username&&(l=g_username);var c="<span>昵称:</span>",p="<input type='text' id='inputnick' value='"+l+"' class='cflogin_input' onfocus='g_login.clearInput()'>";r.innerHTML=c+p,r.className="cflogin_input_div",this.div=r}}},Login.prototype.drawCallback=function(){document.body.appendChild(this.div);var e=document.createElement("div");e.id="errmsg",e.className="cflogin_tip",document.body.appendChild(e),this.div=null},Login.prototype.clearInput=function(){var e=document.getElementById("inputnick");e.value==Login_InputDft&&(e.value="")},Login.prototype.choseBorderImg=function(e){for(var t,i=0;i<login_imgs.length;i++)if(0==e){if("choseboy"==login_imgs[i].name){t=login_imgs[i];break}}else if("chosegirl"==login_imgs[i].name){t=login_imgs[i];break}var a={name:"choseBorder",src:"static/img/bt_head_chose.png",x:t.x-24,y:t.y-24};return a},Login.prototype.drawChoseBorder=function(e){this.sex=e;var t=this.choseBorderImg(e),i=g_game.m_scene.m_map.findImg(t.name);i?(i.x=t.x,i.y=t.y,g_game.m_scene.m_map.draw()):g_game.addImg(t)},Login.prototype.msg=function(e){var t=document.getElementById("errmsg");if(null==t){var i=document.createElement("div");i.id="errmsg",i.className="cflogin_tip",document.body.appendChild(i),t=document.getElementById("errmsg")}t.innerHTML=e;
},Login.prototype.onImgClick=function(e){var t=store.get(g_player.name),i=document.getElementById("inputnick");if("chosegirl"==e.name||"choseboy"==e.name){if(null!=t&&t.playername==i.value)return;var a=0;"chosegirl"==e.name&&(a=1),this.drawChoseBorder(a)}else if("btstart"==e.name){if(null==i.value||""==i.value||i.value==Login_InputDft)return void this.msg("输入您的昵称");if(null==this.sex)return void this.msg("选择您的性别");this.login()}},Login.prototype.registerCallback=function(e){var t=cfeval(e);if(null!=t.code&&t.code>0)return void this.msg("注册失败: "+ERR_MSG[t.code]);if(null!=t.pwd){var i=t;i.quest=[],i.createtime=Date.parse(new Date);var a=store.get(this.name),n=a[a.length-1];(null==n||n.playerid!=i.playerid)&&a.push(i),store.set(g_player.name,i),this.loginCallback(e)}},Login.prototype.register=function(){g_msg.showload("g_login.register");var e=document.getElementById("inputnick"),t=e.value,i=11,a="playername="+t+"&accountid="+i+"&sex="+g_login.sex;a="player.playername="+t+"&player.accountid="+i+"&player.sex="+g_login.sex;try{$.ajax({type:"post",url:"/cf/login_register.do",data:a,success:function(e){g_login.registerCallback(e),g_msg.destroyload()}})}catch(n){return logerr(n.name+" :  "+a),!1}},Login.prototype.loadInsureData=function(e){g_player.insure={};var t=[],i=cfeval(e);for(itemid in i){var a=store.get(g_insure.name)[itemid];a&&(0==i[itemid].profit?g_player.insure[itemid]=i[itemid]:t.push({type:g_insure.name,t:parseInt(a.type),name:a.name,profit:parseInt(i[itemid].profit)}))}return t},Login.prototype.loadData=function(e){g_player.data=e,g_player.saving={};var t=[],i=cfeval(e.saving);for(itemid in i){var a=store.get(g_saving.name)[itemid];a&&((0==a.type||i[itemid].profit<=0)&&(g_player.saving[itemid]=i[itemid]),i[itemid].profit>0&&t.push({type:g_saving.name,t:parseInt(a.type),name:a.name,profit:parseInt(i[itemid].profit)}))}for(var n=this.loadInsureData(e.insure),s=0;s<n.length;s++)t.push(n[s]);return g_player.stock={},e.stock.length>0&&(g_player.stock=cfeval(e.stock)),g_player.setStockIds(),t},Login.prototype.msgtip=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.type==g_saving.name){var a=parseInt(i.profit);0==i.t?g_msg.tip("获得"+i.name+"利息:"+a):g_msg.tip("您的"+i.name+"存款到期, 获得利息:"+a)}else i.type==g_insure.name&&(-1==i.profit?g_msg.tip("您的"+i.name+"已到期"):g_msg.tip("您的"+i.name+"已到期,获得收益:"+parseInt(i.profit)))}},Login.prototype.syncLoadData=function(e){try{g_login.loadCount=0;var t="playerid="+e+"&type=1";$.ajax({type:"post",url:"/cf/login_load.jsp",data:t,success:function(e){g_login.syncLoadDataCallback_saving(e)}}),g_login.loadCount++,t="playerid="+e+"&type=2",$.ajax({type:"post",url:"/cf/login_load.jsp",data:t,success:function(e){g_login.syncLoadDataCallback_insure(e)}}),g_login.loadCount++,t="playerid="+e+"&type=3",$.ajax({type:"post",url:"/cf/login_load.jsp",data:t,success:function(e){g_login.syncLoadDataCallback_stock(e)}}),g_login.loadCount++,t="playerid="+e+"&type=4",$.ajax({type:"post",url:"/cf/login_load.jsp",data:t,success:function(e){g_login.syncLoadDataCallback_top(e)}}),g_login.loadCount++}catch(i){return logerr(i.name+" :  "+t),!1}},Login.prototype.syncLoadDataCallback_saving=function(e){var t=[],i=cfeval(e);for(itemid in i){var a=store.get(g_saving.name)[itemid];a&&((0==a.type||i[itemid].profit<=0)&&(g_player.saving[itemid]=i[itemid]),i[itemid].profit>0&&t.push({type:g_saving.name,t:parseInt(a.type),name:a.name,profit:parseInt(i[itemid].profit)}))}g_bank.onEnter(),g_login.msgtip(t),g_login.callbackDone()},Login.prototype.syncLoadDataCallback_insure=function(e){var t=[],i=cfeval(e);for(itemid in i){var a=store.get(g_insure.name)[itemid];a&&(0==i[itemid].profit?g_player.insure[itemid]=i[itemid]:t.push({type:g_insure.name,t:parseInt(a.type),name:a.name,profit:parseInt(i[itemid].profit)}))}g_login.msgtip(t),g_login.callbackDone()},Login.prototype.syncLoadDataCallback_stock=function(e){var t=cfeval(e);g_player.stock=t,g_player.setStockIds(),g_login.callbackDone()},Login.prototype.syncLoadDataCallback_top=function(e){g_player.data.weektop=parseInt(e),g_login.callbackDone()},Login.prototype.callbackDone=function(){g_login.loadCount--,g_login.loadCount<=0&&g_player.flushPageview()},Login.prototype.loginCallback=function(e){var t=cfeval(e);if(null!=t.code&&t.code>0)return this.msg("登陆失败: "+ERR_MSG[t.code]),void(g_username=null);var i=t;$("#inputnickdiv").remove(),$("#errmsg").remove();var a=head_imgs[i.sex];a.name=i.playername,g_game.enter(a);var n=store.get(this.name),s=n[n.length-1];(null==s||s.playerid!=i.playerid)&&(n.push(i),store.set(g_login.name,n)),store.set(g_player.name,i),g_player.loginback(i),g_playerlog.addlog();var o=!1;if(null!=i.questDoneTime){var r=new Date(i.questDoneTime);o=IsSameDay(new Date,r)}if(g_quest.reset(i.questdonecount),!o){var l=i.questdonecount;2==l&&(l=0);var c=g_quest.onAcceptDaily(l);c&&g_playerlog.updateQuest()}this.syncLoadData(i.playerid);var p=!1;if(null!=i.lastlogin){var g=new Date(i.lastlogin);p=IsSameDay(new Date,g)}p?g_game.onEnter():g_signin.show()},Login.prototype.login=function(){if(g_msg.showload("g_login.login"),null==g_username){var e=document.getElementById("inputnick");g_username=e.value}var t="setting={android:"+browser.versions.android+",iphone:"+browser.versions.iPhone;t+=",iPhone5:"+browser.versions.iPhone5,t+=",iPad:"+browser.versions.iPad,t+=",width:"+window.screen.width,t+=",screekey:"+g_screenkey+"}";var i="openid="+g_openid+"&playername="+g_username+"&sex="+g_login.sex+"&"+t;new Date;try{$.ajax({type:"post",url:"/cf/login_login.jsp",data:i,success:function(e){g_login.loginCallback(e),g_msg.destroyload()}})}catch(a){return logerr(a.name+" :  "+i),!1}return!0};var g_login=new Login;Playerlog=function(){this.name="playerlog"},Playerlog.prototype.init=function(){var e=store.get(this.name);null==e&&store.set(this.name,{})},Playerlog.prototype.findlogkey=function(){var e=new Date,t=g_player.data;return t.playerid+"_"+e.toDateString()},Playerlog.prototype.addlog=function(){var e=new Date,t=g_playerlog.findlogkey(),i=Date.parse(e),a={feeling:-1,dailyquest:0,logins:[i]},n=store.get(this.name),s=n[t];s&&(s.logins.push(i),a=s),n[t]=a,store.set(this.name,n)},Playerlog.prototype.findTodayLog=function(){var e=g_playerlog.findlogkey(),t=!0,i=!0,a=(new Date,store.get(this.name)),n=a[e];return n&&(n.feeling>=0&&(t=!1),1==n.dailyquest&&(i=!1)),[i,t]},Playerlog.prototype.updateQuest=function(){var e=g_playerlog.findlogkey(),t=(new Date,store.get(this.name)),i=t[e];i&&(i.dailyquest=1),t[e]=i,store.set(this.name,t)},Playerlog.prototype.updateSignin=function(e){try{var t="playerid="+g_player.data.playerid+"&type=0";$.ajax({type:"post",url:"/cf/player_update.jsp",data:t,success:function(e){}})}catch(i){document.write(i.name)}var a=g_playerlog.findlogkey(),n=(new Date,store.get(this.name)),s=n[a];s&&(s.feeling=e),n[a]=s,store.set(this.name,n)},Player=function(){this.name="player",this.count=0,this.syncDuration=5,this.data={},this.stockids=[],this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.pageheader=this.tagname+"header",this.graphName=this.name+"graph"},Player.prototype=new Datamgr,Player.prototype.init=function(){this.data=store.get(this.name)},Player.prototype.getTotal=function(e){var t=e.saving[1].amount,i=0;for(key in e.saving)1!=key&&e.saving[key]&&(i+=e.saving[key].amount);var a=0;for(key in e.insure)a+=e.insure[key].amount;var n=0;for(key in e.stock)for(var s=e.stock[key],o=0;o<s.length;o++)n+=s[o].qty*s[o].price;return total=parseInt(t)+parseInt(i)+parseInt(a)+parseInt(n),{saving:parseInt(t),saving2:parseInt(i),insure:parseInt(a),stock:parseInt(n),total:total}},Player.prototype.flushPageview=function(){var e=document.getElementById("tagsaving"),t=this.getTotal(g_player);e.innerHTML="总资产: "+t.total;var i="";this.data.weektop>0&&(i=this.data.weektop),e=document.getElementById("tagweektop"),e.innerHTML="周排名: "+i,e=document.getElementById("tagplayerinfo");var a=g_title.getLevel();e.innerHTML=g_title.getData(a).name,e=document.getElementById("taglevel"),e.innerHTML=a},Player.prototype.updateData=function(e){var t=g_title.getLevel();for(key in e)"cash"==key?this.saving[1].amount=e[key]:this.data[key]=e[key];var i=g_title.getLevel();i>t&&g_uplevel.open(),this.flushPageview(),this.syncPlayerData(),store.set(this.name,this.data)},Player.prototype.clone=function(e){var t=this.data;e.playerid=t.playerid,e.playername=t.playername,e.exp=t.exp,e.sex=t.sex},Player.prototype.syncPlayerData=function(){var e={};this.clone(e);var t="playerdata="+JSON.stringify(e);try{$.ajax({type:"post",url:"/cf/login_update.do",data:t,success:function(e){cfeval(e)}})}catch(i){document.write(i.name)}},Player.prototype.broke=function(){var e=0-this.saving[1].amount;if(!(0>=e)){for(key in this.saving)if(1!=key&&(e-=this.saving[key],0>=e))break;if(e>0)for(key in this.stock);}},Player.prototype.loginback=function(e){var t=g_player.name+"_"+e.playername,i=store.get(t);null==i&&(i=e,store.set(t,i)),i.quotetime=e.quotetime,i.openstock=e.openstock,i.playerid=e.playerid,i.exp=e.exp,g_player.data=i,g_player.saving={},g_player.insure={},g_player.stock={},store.set(t,i)},Player.prototype.isopenstock=function(){var e=g_player.name+"_"+g_player.data.playername,t=store.get(e);return null==t?0:t.openstock},Player.prototype.setOpenstock=function(){var e=g_player.name+"_"+g_player.data.playername,t=store.get(e);null!=t&&(t.openstock=1),store.set(e,t)},Player.prototype.prize=function(e){for(var t={},i=!1,a=0;a<e.length;a++){var n="";if(e[a].t==ITEM_TYPE.EXP){n="exp";var s=this.data[n]+e[a].v;0>s&&(s=0),t[n]=s}else e[a].t==ITEM_TYPE.CASH&&(this.saving[1].amount+=e[a].v,i=!0)}if(this.saving[1].amount<0&&this.broke(),1==i)try{var o={itemid:1,amount:this.saving[1].amount,playerid:this.data.playerid},r=obj2ParamStr("saving",o);$.ajax({type:"post",url:"/cf/saving_updatelive.do",data:r,success:function(e){cfeval(e)}})}catch(l){logerr(l.name)}this.updateData(t)},Player.prototype.setStockIds=function(){this.stockids=[];for(stockid in this.stock){for(var e=0,t=0;t<this.stock[stockid].length;t++)e+=this.stock[stockid][t].qty;e>0&&this.stockids.push(stockid)}},Player.prototype.getData=function(e){var t;return"insure"==e?(this.insure=this.insure?this.insure:{},t=this.insure):"stock"==e?(this.stock=this.stock?this.stock:{},t=this.stock):"saving"==e&&(this.saving=this.saving?this.saving:{},t=this.saving),t},Player.prototype.getItem=function(e,t){var i=store.get(e);return i[t]},Player.prototype.getOfftimeInsure=function(){var e=new Date,t=[],i=Date.parse(e);for(itemid in this.insure){var a=this.insure[itemid].createtime;3e3>i-a&&t.push(itemid)}return t},Player.prototype.getStockItem=function(e){var t=0,i=0,a=this.stock[e];if(a)for(var n=0;n<a.length;n++)i+=a[n].amount,t+=a[n].qty;return{qty:t,amount:i}},Player.prototype.setStockItemPs=function(e,t){var i=this.stock[e];if(i)for(var a=0;a<i.length;a++)i[a].price=t},Player.prototype.getSavingItem=function(e){var t=this.saving[e];return t||(t={amount:0,profit:0,qty:0}),t},Player.prototype.getInsureItem=function(e){var t=this.insure[e];return t||(t={amount:0,price:0,profit:0,qty:0}),t},Player.prototype.buyItem=function(e,t,i,a){if(0>=t||0==i)return!1;var n=store.get(e),s=n[t];if(null==s)return!1;var o=this.saving[1].amount,r=parseInt(a*i);if(r>o)return void g_msg.tip("您的钱不够");var l={itemid:t,playerid:this.data.playerid,qty:i,price:a,amount:r},c=obj2ParamStr(e,l),p=myajax(e+"_add",c);if(null==p||0!=p.code)return g_msg.tip("操作失败:"+ERR_MSG[p.code]),{ret:!1};var g=this.getData(e);if(e==g_saving.name||e==g_insure.name)r>0?(g[t]=l,g[t].createtime=Date.parse(new Date),g[t].profit=0):g[t]=null;else if(e==g_stock.name){if(g[t]||(g[t]=[]),i>0)g[t].push(l);else for(var d=0-i,m=0;m<g[t].length;m++){if(!(g[t][m].qty<=d)){g[t][m].qty-=d,g[t][m].amount=g[t][m].qty*g[t][m].price;break}d-=g[t][m].qty,g[t].splice(m,1),m--}g_player.setStockIds()}return o-=r,this.updateData({cash:o}),g_quest.onBuyItem(e,s,i),l.name=s.name,{ret:!0,item:l}},1==LoginMode&&(store.remove("player"),store.remove("playerlog"));var g_playerlog=new Playerlog;g_playerlog.init();var g_player=new Player;g_player.init(),Quest=function(){this.name="quest",this.tagname="my"+this.name,this.count=0,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.currPage=0,this.dailyCount=2,this.pageCount=3},Quest.prototype=new Datamgr,Quest.prototype.init=function(e){this.duration=e,store.remove(this.name);var t=store.get(this.name);null==t&&store.set(this.name,data_questdata),this.buildHTML()},Quest.prototype.buildPage=function(e){var t=store.get(g_quest.questkey());null==t&&(t=[]);var i=store.get(this.name),a="";if(t.length<=0)a+="<div class='cfpanel' ID='insure_d1'>您当前没有任务",a+="</div>";else{var n=e*this.pageCount,s=(e+1)*this.pageCount;s>t.length&&(s=t.length),a+="<div class='cfpanel_body'>";for(var o=n;s>o;o++){for(var r,l=t[o],c=0;c<i.length;c++)if(i[c].id==l.id){r=i[c];break}var p=null!=r&&l.status==QUEST_STATUS.DONE,g="g_quest.gotoQuest("+r.id+")";p&&(g="g_quest.getQuetPrize("+r.id+")"),a+="<div class='cfpanel' ID='"+this.name+"_d"+r.id+"' onclick='"+g+"'>",a+="<div><span class='cfpanel_title'>"+r.name+"</span>",p&&(a+="<input type='button' class='cf_bt questprize' value='领取奖励'/>"),a+="</div>",a+="        <table id='"+this.tagname+"tab'>",a+="             <tr>",a+="               <td class='cfquest_td'>"+r.descs.substring(0,15)+"</td>",a+=p?"<td style='text-align:right'><img class='cfquest_icon' src='static/img/done.png'></td>":"<td style='text-align:right'><img class='cfquest_icon' src='static/img/notdone.png'></td>",a+="              </tr>",a+="          </table>",a+="</div>"}a+="</div>",this.currPage=e,a+=this.buildPaging(e,t.length)}var d=document.getElementById(this.pagename);d.innerHTML=a},Quest.prototype.gotoQuest=function(e){this.onPanelClick(e);var t=(store.get(this.name),this.findItem(e));null!=t&&(-1==t.type||t.type==QUEST_TYPE.BUY_INSURE||t.type==QUEST_TYPE.BUY_FINAN?g_insure.show():t.type==QUEST_TYPE.BUY_STOCK||t.type==QUEST_TYPE.SELL_STOCK?g_stock.show():t.type==QUEST_TYPE.SAVING&&g_bank.show(),this.hide())},Quest.prototype.questkey=function(){return null!=g_player.data?g_player.data.playername+"_"+g_quest.name:void 0},Quest.prototype.reset=function(e){var t=g_quest.questkey(),i=store.get(t);null!=i&&i.length>=1&&e>0&&(i.splice(0,e),store.set(t,i))},Quest.prototype.onAcceptDaily=function(e){var t=g_quest.questkey(),i=store.get(t);if(null==i&&(i=[]),!(i.length>=2)){var a=store.get(this.name),n=this.dailyCount-e;n>a.length&&(n=a.length);var s=[];if(i.length>0){exitsId=i[0].id;for(var o=0;o<a.length;o++)a[o].id!=exitsId&&s.push(a[o])}else s=a;for(var r=Date.parse(new Date),l=0;n>l;l++){var c=Math.floor(Math.random()*s.length);i.push({id:s[c].id,accept:r,status:QUEST_STATUS.ACTIVE}),s.splice(c,1)}return store.set(t,i),!0}},Quest.prototype.doneQuest=function(e){for(var t=g_quest.questkey(),i=store.get(t),a=0;a<i.length;a++){var n=i[a];if(n.id==e.id){if(n.status==QUEST_STATUS.DONE)continue;i[a].status=QUEST_STATUS.DONE,g_msg.tip("任务<span style='color:red'>"+e.name+"</span>完成，请领取奖励");break}}store.set(t,i);try{var s="playerid="+g_player.data.playerid+"&type=1";$.ajax({type:"post",url:"/cf/player_update.jsp",data:s,success:function(e){}})}catch(o){document.write(o.name)}},Quest.prototype.getQuetPrize=function(e){var t=(store.get(this.name),this.findItem(e));if(null!=t){var i=cfeval(t.prize);g_player.prize(i);for(var a,n=store.get(g_quest.questkey()),s=0;s<n.length;s++)if(n[s].id==e){a=s;break}playAudioHandler("money"),g_msg.tip("成功领取任务奖励:"+itemStr2(i,",")),n.splice(a,1),store.set(g_quest.questkey(),n),this.buildPage(0)}},Quest.prototype.onBuyItem=function(e,t,i){var a;"insure"==e?(0==parseInt(t.type)?a=QUEST_TYPE.BUY_INSURE:1==parseInt(t.type),a=QUEST_TYPE.BUY_FINAN):"stock"==e?i>0?a=QUEST_TYPE.BUY_STOCK:0>i&&(a=QUEST_TYPE.SELL_STOCK):"saving"==e&&(a=QUEST_TYPE.SAVING);var n=store.get(g_quest.questkey());if(null!=n)for(var s=0;s<n.length;s++)if(n[s].status==QUEST_STATUS.ACTIVE){var o=this.findItem(n[s].id);if(o.type==a||-1==o.type){this.doneQuest(o);break}}},Quest.prototype.getQuests=function(e){var t=store.get(g_quest.questkey()),i=[];if(!t)return i;for(var a=0;a<t.length;a++)t[a].status==e&&i.push(t[a].itemid);return i},Quest.prototype.update=function(){if(g_game.enter&&(this.count++,this.count%3==0)){var e=document.getElementById("tag"+this.name),t=g_quest.getQuests(QUEST_STATUS.ACTIVE);if(t.length>0&&e){var i=e.innerHTML,a=i.indexOf("icon_quest_on.png");a>0?e.innerHTML="<img src='static/img/icon_quest.png' class='cfpage_text quest2' onclick='g_quest.onclick()":e.innerHTML="<img src='static/img/icon_quest_on.png' class='cfpage_text quest2' onclick='g_quest.onclick()'>"}}},Quest.prototype.constructor=Quest;var g_quest=new Quest;g_quest.init(30),Signin=function(){this.name="signin",this.backdrop="static",this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.feeling=-1},Signin.prototype=new Datamgr,Signin.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_signindata),this.buildHTML(),this.buildPage(0)},Signin.prototype.buildPage=function(e){var t="<div class='cfpage_content'>";t+=" 今天签到将获得:",t+="      <span id='signin_gettoday' class='cf_font2'> </span><br>",t+="  明天签到将获得:",t+="  <span id='signin_gettomorrow' class='cf_font2'> </span>",t+="     <div class='cf_font3'>(连续签到获得的奖励将有提升)</div>",t+=" <div class='cf_signin_feeling'> 请选择您今天的心情:",t+="     <div id ='signin_feeling' class='cf_signin_feeling2'>心情选择</div>  ",t+=" </div>",t+=" </div>";var i=document.getElementById(this.pagename);i.innerHTML=t},Signin.prototype.findPrize=function(e){var t={currPz:[],toPz:[]},i=store.get(this.name);if(null!=i)for(var a=0;a<i.length;a++){var n=i[a],s={t:n.type,v:n.value};n.day==e?t.currPz.push(s):n.day==e+1&&t.toPz.push(s)}return t},Signin.prototype.show=function(){playAudioHandler("open1");var e=store.get(g_playerlog.name),t=findSigninLog(e);if(!(0>=t)){var i=this.findPrize(t),a=document.getElementById("signin_gettoday"),n="<br>",s=itemValue(i.currPz,0),o=itemValue(i.currPz,1);n+="<img class='cficon_exp' src='static/img/exp.png'/>X<span class='cfsignin_mmdesc'>&nbsp;&nbsp;&nbsp;&nbsp;<img class='cficon_money' src='static/img/money.png'/>X</span><span class='cfsignin_prize exp' id='cfsignin_prize_exp'>"+o+"</span>",n+="<span class='cfsignin_prize' id='cfsignin_prize'>"+s+"</span>",a.innerHTML=n;var r=itemValue(i.toPz,0),l=itemValue(i.toPz,1);a=document.getElementById("signin_gettomorrow"),a.innerHTML="<br><img class='cficon_exp' src='static/img/exp.png'/>X"+l+"&nbsp;&nbsp;&nbsp;&nbsp;<img class='cficon_money' src='static/img/money.png'/>X"+r;for(var c=document.getElementById("signin_feeling"),p=0;p<c.childNodes.length;p++){var g=c.childNodes[p];c.removeChild(g)}var d="";d+="        <table class='cfsignin_content'>",d+="             <tr>";for(var p=0;4>p;p++){var m=feeling_imgs[p],u=p+1;d+="<td class='cfsignin_feelingimgs' id='signin_feeling"+u+"'",d+=" onclick='g_signin.clickFeeling("+u+")'>",d+="<img class='cffeelingimg' src='"+m.src+"'><br>",m=feeling_imgs[p+4],d+="<img class='cffeelingword'  src='"+m.src+"'>",d+="</td>"}d+="</tr>",d+="</table>     ",this.currPrize=i.currPz,c.innerHTML=d,$("#"+this.tagname).modal({backdrop:"static",position:getSizes().PageTop,show:!0})}},Signin.prototype.clickFeeling=function(e){for(var t=0;4>t;t++){var i=document.getElementById("signin_feeling"+(t+1));i.style.border="none"}var i=document.getElementById("signin_feeling"+e);i.style.border="3px solid green",playAudioHandler("money");var a=$("#cfsignin_prize_exp");a.animate({fontSize:"2.5em"},500),a.animate({left:"-="+getSizes().SigninMoney[0],top:"-="+getSizes().SigninMoney[2]},1500),a.animate({fontSize:"1em"},200,function(){var e=$("#cfsignin_prize_exp");e.remove()});var a=$("#cfsignin_prize");a.animate({fontSize:"2.5em"},500),a.animate({left:"-="+getSizes().SigninMoney[1],top:"-="+getSizes().SigninMoney[2]},1500),a.animate({fontSize:"1em"},200,function(){var t=$("#cfsignin_prize");t.remove(),g_player.prize(g_signin.currPrize),g_signin.currPrize=null,$("#"+g_signin.tagname).modal("hide"),g_playerlog.updateSignin(e),g_game.onEnter(),Is_InBrowser||g_share.show()})};var g_signin=new Signin;g_signin.init(),Insure=function(){this.name="insure",this.cname="保险",this.pageCount=4,this.count=0,this.currPage=0,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.data={}},Insure.prototype=new Datamgr,Insure.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_insuredata),this.buildHTML(),tagdetail=$("#"+this.pagedetailname),this.finalPageDetail=tagdetail.css("height"),this.smallPageDetail=.8*parseInt(this.finalPageDetail.substring(0,this.finalPageDetail.indexOf("px")))+"px"},Insure.prototype.onEnter=function(){return},Insure.prototype.findIds=function(){var e=store.get(this.name),t=[],i=[];for(key in e){var a=g_player.getInsureItem(key);a.qty>0?i.push(key):t.push(key)}return i.concat(t)},Insure.prototype.reloadInsures=function(){var e="insure.playerid="+g_player.data.playerid,t=$.ajax({type:"post",url:"/cf/insure_get.do",data:e,async:!1}),i=g_login.loadInsureData(t.responseText);g_login.msgtip(i)},Insure.prototype.buildPage=function(e){if(!(0>e)){playAudioHandler("open1"),this.reloadInsures();var t=store.get(this.name),i=this.findIds(),a="";if(i.length<=0)a+="<div class='cfpanel' ID='insure_d1'><div class='cfpanel_body'>没有产品</div>",a+="</div>";else{var n=e*this.pageCount,s=(e+1)*this.pageCount;s>i.length&&(s=i.length),a+="<div class='cfpanel_body'>";for(var o=n;s>o;o++){var r=i[o],l=t[r],c=g_player.getInsureItem(r);c||(c={amount:0,price:0,profit:0,qty:0});var p;if(0==l.type)p=c.qty<=0?"尚未购买":"已购 <span style='color:yellow'>"+c.qty+"</span> 份";else{var g="green";c.profit<0&&(g="red"),p=c.qty<=0?"尚未购买":"已购 <span style='color:yellow'>"+c.qty+"</span>份,预计盈亏:<span style='color:red'>"+parseInt(l.profit*c.qty)+"</span>"}if(a+="<div class='cfpanel' ID='"+this.name+"_d"+r+"' onclick='g_insure.clickDetail("+r+","+l.type+")'>",a+=l.name.length>=5&&c.qty>0?"<span class='cfpanel_title small'>"+l.name+"</span>":"<span class='cfpanel_title'>"+l.name+"</span>",a+="<span class='cfpanel_text right'>"+p+"</span>",a+="	<div>",a+="<span class='cfpanel_text'>价格: <img class='cficon_money' src='static/img/money.png'/>"+ForDight(l.price)+"</span>",c.qty<=0)a+="<span class='cfpanel_text right'>期限:"+l.period+"小时</span>";else{var d=timeoutDesc(c,l,1);a+="<span class='cfpanel_text right'>"+d+"</span>"}a+="     </div>",a+="</div>"}a+="           <div class='cfinsure_tip'>  ",a+="          保险分为规避风险类产品和理财投资类产品",a+="             </div>",a+="</div>",this.currPage=e,a+=this.buildPaging(e,i.length)}var m=document.getElementById(this.pagename);m.innerHTML=a}},Insure.prototype.clickDetail=function(e,t){this.onPanelClick(e),playAudioHandler("open1"),0==t?g_insure.show_insuredetail(e):g_insure.show_finandetail(e)},Insure.prototype.showDetail=function(e,t,i,n,s,o,r){var l=this.tagdetailname,c=this.pagedetailname,p="        <div class='cfinsure_content'>";o&&r?(p+="<div class='cfmsg_h2 insure'>"+e+"</div>",p+="<div class='cfmsg_text insure'>"+t+"</div>",tagdetail=$("#"+this.pagedetailname),tagdetail.css("height",this.smallPageDetail)):(p+="<div class='cfmsg_h2'>"+e+"</div>",p+="<div class='cfmsg_text final'>"+t+"</div>",tagdetail=$("#"+this.pagedetailname),tagdetail.css("height",this.finalPageDetail)),o?(p+="          <button class='cf_bt bt_cancel' onclick='g_insure.closeDetail()'>取消</button>",p+="          <button class='cf_bt' onclick='"+i+"("+n+","+s+")'>"+o+"</button>"):p+="          <button class='cf_bt bt_cancel' onclick='g_insure.closeDetail()'>确认</button>",p+="             </div>";var g=document.getElementById(c);g.innerHTML=p,a=$("#"+l),a.modal({position:getSizes().DetailPageTop,show:!0})},Insure.prototype.closeDetail=function(e){playAudioHandler("close1"),$("#"+this.tagdetailname).modal("hide")},Insure.prototype.show_insuredetail=function(e){var t=store.get(this.name),i=t[e];if(null!=i){var a=g_player.getInsureItem(e),n="            <div>";if(n+="        <table class='cfinsure_tabl'>",n+="             <tr>",n+="               <td width='30%' ><div class='cfplayer_head_bg insure'><img src='static/img/insure_"+e+".png' class='cfinsure_img'></div></td>",n+="               <td><div class='cfinsure_desc'>"+i.descs+"</div> </td>",n+="              </tr>",n+="          </table>     ",n+="           </div>  ",n+="<img src='static/img/pop_line.png' style='width:95%'>",n+="<br> ",n+="<div>  ",n+="<table class='cfinsure_tabl2'>",n+="<tr><td>价格: <img class='cficon_money' src='static/img/money.png'/> "+i.price+" </td></tr>",n+="<tr><td>周期: "+i.period+"小时 </td></tr>",n+="</table>",a.qty>0){var s=timeoutDesc(a,i,1);n+="<br>(已购买该保险,  "+s+")"}n+="           </div>  ";var o;a.qty<=0&&(o="购买"),this.showDetail(i.name,n,"g_insure.doBuy",e,1,o,!0)}},Insure.prototype.show_finandetail=function(e){var t=store.get(this.name),i=t[e];if(null!=i){var a=g_player.getInsureItem(e),n="100%";i.descs.length>35&&(n="80%");var s="            <div>";if(s+="        <table class='cfinsure_tabl'>",s+="             <tr>",s+="               <td width='30%' ><div class='cfplayer_head_bg insure'><img src='static/img/insure_"+e+".png' class='cfinsure_img'></div></td>",s+="               <td><div class='cfinsure_desc'><span style='font-size:"+n+"'>"+i.descs+"</span></div></td>",s+="              </tr>",s+="          </table>     ",s+="           </div>  ",s+="<img src='static/img/pop_line.png' style='width:95%'>",s+="           <div class='cfinsure_finan'>  ",s+="<table class='cfinsure_tabl2'>",s+="<tr><td>价格: <img class='cficon_money' src='static/img/money.png'/> "+i.price+"</td></tr>",s+="<tr><td>收益: <img class='cficon_money' src='static/img/money.png'/> "+i.profit+"/份</td></tr>",s+="<tr><td>周期: "+i.period+"小时</td></tr>",s+="</table>     ",a.qty>0){var o=timeoutDesc(a,i,1);s+="<br>已购买  <span style='color:red'>"+a.qty+"</span>份, "+o}a.qty<=0&&(s+="        <table class='cfinsure_tabl'>",s+="             <tr>",s+="               <td><input type='button' class='cf_count insure' onclick='g_insure.countBuy(-1)'></td>",s+="               <td><input type='text' id='finan_count' value='1' class='cfinsure_finalcount'></td>",s+="              <td> <input type='button' class='cf_count add insure' onclick='g_insure.countBuy(1)'></td>",s+="              </tr>",s+="          </table>     "),s+="           </div>  ";var r;a.qty<=0&&(r="购买"),this.showDetail(i.name,s,"g_insure.doBuy",e,0,r,!1)}},Insure.prototype.countBuy=function(e){var t=document.getElementById("finan_count"),i=parseInt(t.value);0>=i+e?i=1:i+=e,t.value=i},Insure.prototype.doBuy=function(e,t){var i=store.get(this.name)[e];if(i){if(1==i.type){var a=document.getElementById("finan_count");null!=a&&(t=a.value)}if(0==t)return void g_msg.tip(this.cname+"购买","份数不能为零!");var n=i.price,s=n*t,o=g_player.saving[1].amount;return s>o?void g_msg.tip("您的现金不够，购买失败!"):void this.requestBuy(e,t,s)}},Insure.prototype.requestBuy=function(e,t,i){if(e){var a=store.get(g_insure.name)[e];g_insure.buyItem={itemid:e,playerid:g_player.data.playerid,qty:t,price:a.price,amount:i}}if(!g_insure.buyItem)return!1;g_msg.showload("g_insure.requestBuy",!0);var n="type=2&playerid="+g_insure.buyItem.playerid+"&itemid="+g_insure.buyItem.itemid;n+="&qty="+g_insure.buyItem.qty+"&price="+g_insure.buyItem.price+"&amount="+g_insure.buyItem.amount;try{$.ajax({type:"post",url:"/cf/data_update.jsp",data:n,success:function(e){g_insure.buyCallback(cfeval(e)),g_msg.destroyload()}})}catch(s){return logerr(s.name+" :  "+dataobj.responseText),!1}},Insure.prototype.buyCallback=function(e){if(e.code)return void g_msg.tip("操作失败:"+ERR_MSG[e.code]);var t=this.buyItem,i=t.itemid,a=store.get(this.name)[i];if(null!=a){var n=t.amount,s=g_player.getData(this.name);n>0?(s[i]=t,s[i].createtime=Date.parse(new Date),s[i].profit=0):s[i]=null,playAudioHandler("money");var o=g_player.saving[1].amount;o-=n,g_player.updateData({cash:o}),g_quest.onBuyItem(this.name,a,1),g_msg.tip("您购买"+t.qty+"份<span style='color:red'>"+a.name+"</span>成功"),this.hide(this.tagdetailname),this.buildPage(0)}},Insure.prototype.existTimeout=function(){var e=store.get(this.name),t=!1;for(itemid in g_player.insure)if(pitem=g_player.insure[itemid]){var i=e[itemid],a=calculateTimeout(pitem,i);if(1>a){t=!0;break}}return t},Insure.prototype.update=function(){if(this.count++,this.count%25==0&&(this.hasTip=this.existTimeout()),!this.hasTip||!g_game.enter){var e=$("#tag2"+this.name);return void(e&&e.remove())}var e=document.getElementById("tag2"+this.name);if(!e){var t=document.createElement("DIV");t.id="tag2"+this.name,t.className="cfpage_text "+this.name,document.body.appendChild(t),e=document.getElementById("tag2"+this.name)}var i=e.innerHTML,a=i.indexOf("tip2");a>0?e.innerHTML="<div class='cfpage_text tip' onclick='g_insure.show()'></div>":e.innerHTML="<div class='cfpage_text tip2' onclick='g_insure.show()'></div>"};var g_insure=new Insure;g_insure.init(),Stockdetail=function(){this.name="Stockdetaildetail",this.pageCount=4,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.data={}},Stockdetail.prototype=new Datamgr,Stockdetail.prototype.init=function(){},Stockdetail.prototype.drawQuote=function(e,t,i,a){var n=store.get(g_stock.name),s=n[e];if(null==s)return void log("no stock quote for:"+e);if(null==i)return void g_msg.tip("no stock quote for:"+e);var o=(new Date,i[0].price),r=(t-o)/o,l="red",c="↑";0>r&&(c="↓",l="green"),r=ForDight(100*r,2);var p=new Date,g=p.toLocaleTimeString(),d="已休市";g_stock.isStockOpen()&&(d="开市",g=p.toLocaleTimeString());for(var m={currPs:t,dir:c,per:r,currTime:g,status:d},u=s.name+" "+m.currPs+" "+m.dir+" ("+m.per+"%)",v=m.currTime+"(北京时间,"+m.status+")",h=0,y=0,f=[],_=i.length,b=0;_>b;b++){var S=ForDight(i[b].price,2);0==h?h=S:S>h&&(h=S),0==y?y=S:y>S&&(y=S),f.push(S),18==e&&b++}f.push(t),y>t?y=t:t>h&&(h=t);var k=ForDight((h-y)/4,2);k>1?k=parseInt(k):.5>k&&(k=.5),y=ForDight(y,1),y>1&&(y=parseInt(y)),h+=k,h=ForDight(h,1),h>1&&(h=parseInt(h));var x=[{name:"PV",value:f,color:"blue",line_width:1}],E=["9:00"];if(g_stock.isStockOpen()){var I=new Date;I.setHours(9),I.setMinutes(0),I.setSeconds(0);var w=4,p=new Date,P=Date.parse(p)-Date.parse(I);P/=w;for(var b=1;w+1>b;b++){var T=new Date;T.getTime()>I.getTime()+b*P&&T.setTime(I.getTime()+b*P),T.setSeconds(0);var D=T.getHours()+":";D+=T.getMinutes()>9?T.getMinutes():"0"+T.getMinutes(),E.push(D)}}else E=["9:00","13:00","17:00","21:00"];var z=new iChart.LineBasic2D({render:a,data:x,offsetx:15,offsety:-10,align:"center",title:{text:u,offsety:-5,font:"微软雅黑",fontsize:getSizes().StockView[4],color:l},subtitle:{text:v,offsety:-5,font:"微软雅黑",fontsize:getSizes().StockView[4]-2,color:l},animation:!0,width:getSizes().StockView[0],height:getSizes().StockView[1],border:{enable:!1},background_color:"#D9E7EA",tip:{enable:!0,shadow:!0,listeners:{parseText:function(e,t,i,a,n){return"<span style='color:#005268;font-size:15px;'>价格约:<br/></span><span style='color:#005268;font-size:20px;'>"+ForDight(i)+"</span>"}}},crosshair:{enable:!0,line_color:"#311212"},sub_option:{smooth:!1,label:!1,hollow:!1,hollow_inside:!1,point_size:1},coordinate:{width:getSizes().StockView[2],height:getSizes().StockView[3],striped_factor:.18,axis:{color:"#311212",width:[0,0,1,1]},gridHStyle:{solid:!1,size:2,color:"#c0c0c0"},gridVStyle:{solid:!1,size:2,color:"#c0c0c0"},scale:[{position:"left",start_scale:y,end_scale:h,scale_space:k,scale_size:2,scale_enable:!1,label:{color:"#311212",font:"微软雅黑",fontsize:getSizes().StockView[4]-3,fontweight:600},scale_color:"#9f9f9f"},{position:"bottom",label:{color:"#311212",font:"微软雅黑",fontsize:getSizes().StockView[4]-3,fontweight:600},scale_enable:!1,labels:E}]}});z.plugin(new iChart.Custom({drawFn:function(){var e=z.getCoordinate(),t=e.get("originx"),i=e.get("originy"),a=e.width,n=e.height;z.target.textAlign("start").textBaseline("bottom").textFont("600 11px 微软雅黑").fillText("价格",t-20,i-12,!1,"#9d987a").textBaseline("top").fillText("",t+a+12,i+n+10,!1,"#9d987a");
}})),z.draw()};var g_stockdetail=new Stockdetail;g_stockdetail.init(),Stock=function(){this.name="stock",this.quotename="quote",this.pagequote="pageq",this.cname="股票",this.pageCount=4,this.currPage=0,this.lastquotes={},this.syncDuration=1,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.graphName=this.name+"graph",this.data={}},Stock.prototype=new Datamgr,Stock.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_stockdata);var t=store.get(this.quotename);t||store.set(this.quotename,{}),this.buildHTML(),setInterval(function(){g_stock.update_self()},StockDuration)},Stock.prototype.onEnter=function(){},Stock.prototype.loadPlayerLastQuote=function(){if(!g_stock.isOpen){var e=g_player.stockids;if(e){var t="stockids="+JSON.stringify(e);try{$.ajax({type:"post",url:"/cf/stock_pagelastquotes.do",data:t,success:function(e){var t=cfeval(e),i=g_stock.playerlastquotes;if(g_stock.playerlastquotes=t,i)for(itemid in t){var a=ForDight(i[itemid]),n=ForDight(t[itemid]);a!=n&&(g_stock.hasTip=!0)}}})}catch(i){return void logerr(i.name)}}}},Stock.prototype.loadPageLastQuote=function(){var e=g_stock.currPageIds;if(e){g_msg.showload("g_stock.loadPageLastQuote");var t="stockids="+JSON.stringify(e);try{$.ajax({type:"post",url:"/cf/stock_pagelastquotes.do",data:t,success:function(e){g_msg.destroyload();var t=cfeval(e);g_stock.lastquotes=t;var i=g_stock.pagequote+g_stock.currPage;store.set(i,t);for(itemid in t){var a=ForDight(t[itemid]),n=document.getElementById(g_stock.name+"_ps"+itemid);if(n){n.innerHTML=a;var s=g_player.getStockItem(itemid);if(!(s.qty<=0)){var o=parseInt(s.qty*a-s.amount),r=document.getElementById(g_stock.name+"_pr"+itemid);r.innerHTML=o,o>0?r.style.color="red":r.style.color="green"}}}}})}catch(i){return void logerr(i.name)}}},Stock.prototype.loadNextQuoteTime=function(e){var t;try{var i=$.ajax({type:"post",url:"/cf/stock_nextquotetime.do",async:!1});null!=i&&i.responseText.length>0&&(t=parseInt(i.responseText))}catch(a){return void logerr(a.name)}return t},Stock.prototype.findStockIds=function(){var e=16,t=store.get(this.name),i=[],a=g_player.stockids.concat();for(itemid in t){for(var n=!1,s=0;s<a.length;s++)if(itemid==a[s]){n=!0;break}n||i.push(itemid)}var o=randomItems(i,null,e-a.length);return a.concat(o)},Stock.prototype.show=function(){if(playAudioHandler("open1"),this.hasTip=!1,1!=g_player.isopenstock())g_msg.open2("证券开户","您需要开通证券账户才能投资股票，请点击'确认'按钮开通","g_stock.confirmOpen",1,1,1,null,"g_stock.onClose");else{var e=new Date;e.getSeconds(),e.getMilliseconds();this.buildPage(0),this.isOpen=!0,$("#"+this.tagname).modal({position:getSizes().PageTop,show:!0});var t=new Date;t.getSeconds(),t.getMilliseconds()}},Stock.prototype.confirmOpen=function(){g_player.setOpenstock(),g_msg.hide(),g_msg.tip("证券账户已开通"),this.show();try{var e="playerid="+g_player.data.playerid+"&type=2";$.ajax({type:"post",url:"/cf/player_update.jsp",data:e,success:function(e){}})}catch(t){return logerr(t.name+" :  "+dataobj.responseText),!1}},Stock.prototype.buildPage=function(e){if(!(0>e)){playAudioHandler("open1");var t=store.get(this.name),i="";if(t.length<=0)i+="<div class='cfpanel' ID='stock_d1'><div class='panel-body'>没有产品</div>",i+="</div>";else{var a=e*this.pageCount,n=(e+1)*this.pageCount,s=this.findStockIds();n>s.length&&(n=s.length),i+="<div class='cfpanel_body'>";var o=[],r=store.get(this.pagequote+e);r||(r={});for(var l=a;n>l;l++){var c=t[s[l]];if(c){var p=s[l];o.push(p);var g=g_player.getStockItem(p),d=0,m=0,u="none";r[p]&&(d=ForDight(r[p]),g.qty>0&&(m=parseInt(g.qty*d-g.amount),u=m>0?"red":"green")),i+="<div class='cfpanel' ID='"+this.name+"_d"+p+"' onclick='g_stock.showDetail("+p+")'>",i+="<span class='cfpanel_title'>"+c.name+"</span>",i+="<span class='cfpanel_text right'>目前持有<span style='color:yellow'> "+g.qty/100+"</span> 手</span>",i+="	<div>",i+="<span class='cfpanel_text'>当前价格: <img class='cficon_money' src='static/img/money.png'/>",i+="<span id='"+this.name+"_ps"+p+"'>"+d+"</span></span>",i+="<span class='cfpanel_text right'>总盈亏: ",i+="<span id='"+this.name+"_pr"+p+"' style='color:"+u+"'>"+m+"</span></span>",i+="     </div>",i+="</div>"}}i+="           <div class='cfinsure_tip'>  ",i+="          股市开市为9:00AM-9:00PM",1==this.isStockOpen()&&(i+="<br>距离下次行情跳动还有: <span id='"+this.name+"_quotetime' style='color:yellow'></span>"),i+="             </div>",i+="</div>",this.currPage=e,i+=this.buildPaging(e,s.length),this.currPageIds=o,this.loadPageLastQuote()}var v=document.getElementById(this.pagename);v.innerHTML=i}},Stock.prototype.showDetail=function(e,t){this.onPanelClick(e),playAudioHandler("open1");var i=store.get(this.name),a=i[e];if(null!=a){this.waitCount=0;var n="尚未持有";currentquotes=store.get(g_stock.pagequote+g_stock.currPage);var s=currentquotes[e],o=0;null!=s&&(o=ForDight(s));var r=g_player.getStockItem(e);if(r.qty>0){profit=o*r.qty-r.amount;var l="red";profit<0&&(l="green"),n="盈亏:<span style='color:"+l+"'>"+parseInt(profit)+"</span>"}var c=g_player.saving[1].amount,p=parseInt(c/(100*o)),g=100;a.descs.length>18&&(g=80);var d="        <div class='cfpanel_text'><div class='cpgapedetail_h2'>"+a.name;d+="<span class='cfpanel_text right'>"+n+" </span>",d+="</div>",d+="<div class='cf_line stockdetail'></div>",d+="<div style='font-size:"+g+"%'> "+a.descs+"</div>",d+="<div class='cf_line stockdetail'></div>",d+="</div>",d+="<div id='"+this.graphName+"'></div>",d+="           <div class='cfstock_content'>  ",d+="        <table id='toplist1_tab'>",d+="             <tr>",d+="               <td>买入价</td>",d+="               <td>"+o+"</td>",d+="               <td>持有:</td>",d+="               <td>"+r.qty/100+" 手</td>",d+="              </tr>",d+="             <tr>",d+="               <td>买卖:</td>",d+="               <td><span id='stockTradeCount' style='color:red'>0</span> 手</td>",d+="               <td>可买入:</td>",d+="               <td><span id='canBuyCount'>"+p+"</span>手</td>",d+="              </tr>",d+="             <tr>",d+="               <td colspan='2'><input type='button' class='cf_bt_green' value='卖出100股' onclick='g_stock.countBuy("+e+",-100,"+o+")'></td>",d+="               <td colspan='2'><input type='button' class='cf_bt_green right' value='买入100股' onclick='g_stock.countBuy("+e+",100,"+o+")'></td>",d+="              </tr>",d+="          </table>     ",d+="           </div>  ",d+="           <div class='cf_stockdetail_btn'>  ",d+="          <button class='cf_bt bt_cancel' onclick='g_stock.closeDetail()'>退出</button>      ",d+="          <button class='cf_bt' onclick='g_stock.doBuy()'>确定</button>",d+="             </div>";var m=document.getElementById(this.pagedetailname);m.innerHTML=d,this.currShowStockId=e,this.currStockPs=o;var u=this.findQuotes();u&&g_stockdetail.drawQuote(e,o,u,this.graphName),null==t&&$("#"+this.tagdetailname).modal({position:0,show:!0})}},Stock.prototype.closeDetail=function(e){playAudioHandler("close1"),$("#"+this.tagdetailname).modal("hide")},Stock.prototype.isStockOpen=function(){var e=!1,t=new Date;return t.getHours()>=9&&t.getHours()<21&&(e=!0),e},Stock.prototype.countBuy=function(e,t,i){this.waitStockid=e,null==this.waitCount&&(this.waitCount=0);var a=g_player.getStockItem(e),n=this.waitCount+t;if(0>n&&a.qty<0-n)return void g_msg.tip("卖出数量不能大于您持有数量!");this.waitCount+=t,this.buyPrice=i;var s=document.getElementById("stockTradeCount");s.innerHTML=this.waitCount/100},Stock.prototype.doBuy=function(){if(!this.isStockOpen())return void g_msg.tip("现在休市，不能交易");if(null==this.waitCount||0==this.waitCount)return void g_msg.tip("请买入或者卖出");var e=store.get(this.name)[this.waitStockid];if(!e)return void g_msg.tip("找不到"+this.name+"数据");var t=this.buyPrice;if(this.waitCount>0){var i=t*this.waitCount,a=g_player.saving[1].amount;if(i>a)return void g_msg.tip("您的现金不够，购买失败!")}else{var n=g_player.getStockItem(this.waitStockid);if(n.qty<0-this.waitCount)return void g_msg.tip("持有数量少于您抛售数量!")}this.requestBuy(this.waitStockid,this.waitCount,this.buyPrice)},Stock.prototype.requestBuy=function(e,t,i){if(e&&(g_stock.buyItem={itemid:e,playerid:g_player.data.playerid,qty:t,price:i,amount:parseInt(i*t)}),!g_stock.buyItem)return!1;g_msg.showload("g_stock.requestBuy",!0);var a="type=3&playerid="+g_stock.buyItem.playerid+"&itemid="+g_stock.buyItem.itemid;a+="&qty="+g_stock.buyItem.qty+"&price="+g_stock.buyItem.price+"&amount="+g_stock.buyItem.amount;try{$.ajax({type:"post",url:"/cf/data_update.jsp",data:a,success:function(e){g_stock.buyCallback(cfeval(e)),g_msg.destroyload()}})}catch(n){return logerr(n.name+" :  "+dataobj.responseText),!1}},Stock.prototype.buyCallback=function(e){if(e.code)return void g_msg.tip("操作失败:"+ERR_MSG[e.code]);var t=this.buyItem,i=t.itemid,a=t.qty,n=store.get(this.name)[i];if(null!=n){var s=t.amount,o=g_player.getData(this.name);if(o[i]||(o[i]=[]),a>0)o[i].push(t);else for(var r=0-a,l=0;l<o[i].length;l++){if(!(o[i][l].qty<=r)){o[i][l].qty-=r,o[i][l].amount=o[i][l].qty*o[i][l].price;break}r-=o[i][l].qty,o[i].splice(l,1),l--}g_player.setStockIds(),playAudioHandler("money");var c=g_player.saving[1].amount;c-=s,g_player.updateData({cash:c}),g_quest.onBuyItem(this.name,n,a),a>0?g_msg.tip("购买<span style='color:red'>"+n.name+"</span>成功,金额:"+t.amount):g_msg.tip("抛售<span style='color:red'>"+n.name+"</span>成功,金额:"+(0-t.amount)),$("#"+this.tagdetailname).modal("hide"),this.buildPage(0)}},Stock.prototype.findQuotes=function(){var e=g_stock.currShowStockId;if(e){var t=store.get(this.quotename),i=t[e];g_msg.showload("g_stock.findQuotes");try{$.ajax({type:"post",url:"/cf/stock_quotes.do",data:"stock.id="+e,success:function(a){i=cfeval(a),t[e]=i,store.set(g_stock.quotename,t),g_stockdetail.drawQuote(e,g_stock.currStockPs,i,g_stock.graphName),g_stock.currShowStockId=null,g_msg.destroyload()}})}catch(a){logerr(a.name)}}},Stock.prototype.onClose=function(){var e=document.getElementById("tag"+this.name);e&&(e.innerHTML=""),this.isOpen=!1,playAudioHandler("close1"),$("#"+g_msg.tagname).modal("hide")},Stock.prototype.findQuoteLostTime=function(){if(!g_player.data||!g_player.data.lastlogin)return 0;var e=Date.parse(new Date),t=(e-g_player.data.lastlogin)/1e3,i=parseInt(t+g_player.data.quotetime),a=i%QUOTETIME,n=QUOTETIME-a;return n},Stock.prototype.update_self=function(){if(g_player.data&&g_player.data.lastlogin){var e=this.findQuoteLostTime(),t=!1;if(e==QUOTETIME&&(this.isOpen||this.loadPlayerLastQuote(),t=!0),this.isOpen&&this.isStockOpen()){var i=document.getElementById(this.name+"_quotetime"),a=parseInt(e/60),n=e%60;10>n&&(n="0"+n),a>0?i.innerHTML="0"+a+"分"+n+"秒":i.innerHTML=n+"秒",t&&this.loadPageLastQuote()}}},Stock.prototype.update=function(){var e="tag2"+this.name,t=document.getElementById(e);if(!this.hasTip||!g_game.enter)return void(t&&document.body.removeChild(t));if(!t){var i=document.createElement("DIV");i.id=e,i.className="cfpage_text "+this.name,document.body.appendChild(i),t=document.getElementById(e)}var a=t.innerHTML,n=a.indexOf("stocktip2");n>0?t.innerHTML="<div class='cfpage_text stocktip' onclick='g_stock.show()'></div>":t.innerHTML="<div class='cfpage_text stocktip2' onclick='g_stock.show()'></div>"};var g_stock=new Stock;g_stock.init(),Bank=function(){this.name="bank",this.count=0,this.pageCount=5,this.currPage=0,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.pageheader=this.tagname+"header"},Bank.prototype=new Datamgr,Bank.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_savingdata),this.buildHTML2()},Bank.prototype.onEnter=function(){var e=g_player.saving,t=!0;for(key in e)if(1!=key){t=!1;break}t&&g_msg.tip("您还没有任何定期存款，收益偏低")},Bank.prototype.buildHTML2=function(){var e=new PageUtil(this.tagname);e.addHeader("<button type='button' class='close' data-dismiss='modal'><img src='static/img/close.png' class='cf_title_close top'></button>");var t="<ul id='"+this.id+"Tab' class='nav nav-tabs'>";t+="<div id='"+this.pageheader+"'></div>",t+="</ul>",e.addHeader(t);var i="<div class='tab-pane in active' id='quest1'>";i+="<div class='cfpage' id='"+this.pagename+"'>",i+="</div></div>",e.addContent(i),document.write(e.toString());var e=this,a=document.getElementById(this.tagname+"_dialog");a&&(a.style.setProperty("width",getSizes().PageWidth),a.style.setProperty("height",getSizes().PageHeight)),$("#"+this.tagname).on("hide.zui.modal",function(){e.onClose&&e.onClose()})},Bank.prototype.buildPage=function(e){this.currPage=e,this.showBank(e,!0)},Bank.prototype.showBank=function(e,t){playAudioHandler("open1");var i="";0==e?(i+="<button class='cf_title_bg saving2off' onclick='g_bank.showBank(1)'></button>",i+="<button class='cf_title_bg savingon'></button>"):(i+="<button class='cf_title_bg savingoff' onclick='g_bank.showBank(0)'></button>",i+="<button class='cf_title_bg saving2on'></button>");var a=document.getElementById(this.pageheader);a.innerHTML=i,0==e?this.showSaving():this.showSaving2(e-1),t&&$("#"+this.tagname).modal({position:Page_Top,show:!0})},Bank.prototype.showSaving=function(){var e=g_player.getTotal(g_player),t=e.saving+e.saving2,i=store.get(g_saving.name),a=ForDight0(e.saving/24*.0035),n=i[1].rate,s="<div class='cfpanel bank'>";s+="<div> 活期存款: <span style='color:yellow'> <img class='cficon_money' src='static/img/money.png'/> "+e.saving+"</span></div>",s+="<div> 定期存款: <span style='color:yellow'> <img class='cficon_money' src='static/img/money.png'/> "+e.saving2+"</span></div>",s+="<div> 存款总额: <span style='color:yellow'> <img class='cficon_money' src='static/img/money.png'/> "+t+"</span></div>",s+=" </div>",s+="</div>",s+=" <div class='cf-bank-feeling'>",s+="     <div>每小时活期存款收益<img class='cficon_money' src='static/img/money.png'/>"+a+"<div>  ",s+="     <div><span>当前活期利率: "+n+"% </span><div>  ",s+=" </div>",s+=" </div>";var o=document.getElementById(this.pagename);o.innerHTML=s},Bank.prototype.showSaving2=function(e){var t=store.get(this.name),i=mapIDs(t),a="";if(i.length<=0)a+="<div class='cfpanel' ID='stock_d1'><div class='panel-body'>没有存款产品</div>",a+="</div>";else{var n=e*this.pageCount+1,s=(e+1)*this.pageCount+1;s>i.length&&(s=i.length),a+="<div class='cfpanel_body'>";for(var o=n;s>o;o++){var r=t[i[o]],l=i[o],c=g_player.getSavingItem(l);if(a+="<div class='cfpanel bank2' ID='"+this.name+"_d"+l+"' onclick='g_bank.showDetail("+l+")'>",a+="<span class='cfpanel_title'>"+r.name+"</span>",c.amount>0){a+="<span class='cfpanel_text right'>已存入 <span style='color:yellow'>"+ForDight(c.amount)+"</span>元";var p=ForDight(r.rate*c.amount/100);a+=",利息 <span style='color:color'> "+p+"</span> 元</span>"}else a+="<span class='cfpanel_text right'>存款  <span style='color:yellow'>0</span> 元</span>";if(a+="</span>",a+="	<div>",a+="<span class='cfpanel_text'>利率: "+ForDight(r.rate)+"%</span>",c.amount<=0)a+="<span class='cfpanel_text right'>尚未存入</span>";else{var g=timeoutDesc(c,r);a+="<span class='cfpanel_text right'>"+g+"</span>"}a+="     </div>",a+="</div>"}a+="</div>",a+=this.buildPaging(e,i.length-1,"g_bank.showBank")}var d=document.getElementById(this.pagename);d.innerHTML=a},Bank.prototype.showDetail=function(e){this.onPanelClick(e),g_saving.showDetail(e)},Bank.prototype.existTimeout=function(){var e=store.get(this.name),t=!1;for(itemid in g_player.saving)if(pitem=g_player.saving[itemid]){var i=e[itemid],a=calculateTimeout(pitem,i);if(1!=itemid&&1>a){t=!0;break}}return t},Bank.prototype.update=function(){if(this.count++,this.count%25==0&&(this.hasTip=this.existTimeout()),!this.hasTip||!g_game.enter){var e=$("#tag2"+this.name);return void(e&&e.remove())}var e=document.getElementById("tag2"+this.name);if(!e){var t=document.createElement("DIV");t.id="tag2"+this.name,t.className="cfpage_text "+this.name,document.body.appendChild(t),e=document.getElementById("tag2"+this.name)}var i=e.innerHTML,a=i.indexOf("tip2");a>0?e.innerHTML="<div class='cfpage_text banktip' onclick='g_bank.show()'></div>":e.innerHTML="<div class='cfpage_text banktip2' onclick='g_bank.show()'></div>"};var g_bank=new Bank;g_bank.init(),Saving=function(){this.name="saving",this.cname="存款",this.pageCount=5,this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.data={}},Saving.prototype=new Datamgr,Saving.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_savingdata),this.buildHTML()},Saving.prototype.showDetail=function(e){playAudioHandler("open1");var t=store.get(this.name),i=t[e];if(null!=i){var a,n=g_player.getSavingItem(e);a=n.amount>0?this.outContent(e,i,n):this.inContent(e,i);var s=document.getElementById(this.pagedetailname);s.innerHTML=a,$("#"+this.tagdetailname).modal({position:getSizes().DetailPageTop,show:!0})}},Saving.prototype.inContent=function(e,t){var i=1e3,a=ForDight(i*(t.rate/100)),n="        <div class='cfsaving_div'>";return n+="        <div><span class='cpgapedetail_h2 left'>"+t.name+"存款</span>",n+="<span class='cpgapedetail_h3'>(1年=现实24小时)</span>",n+="<span class='cfsaving_stext'>存款 </span></div>",n+="<img src='static/img/pop_line.png' class='cf_line'>",n+="           <div class='cfmsg_text'>  ",n+="        <table id='toplist1_tab' class='cfsaving_content'>",n+="             <tr>",n+="               <td colspan='4'>利率: "+t.rate+"%</td>",n+="              </tr>",n+="             <tr>",n+="               <td>存入:</td>",n+="               <td><input type='button' class='cf_count' onclick='g_saving.countBuy("+e+",-1000)'></td>",n+="               <td><input type='text' id='saving_amount' onBlur='' value='1000' class='cfsaving_qty'></td>",n+="               <td><input type='button' class='cf_count add' onclick='g_saving.countBuy("+e+",1000)'></td>",n+="              </tr>",n+="             <tr>",n+="               <td colspan='4'>预计利息: <img class='cficon_money' src='static/img/money.png'/> <span id='savingprofit'>"+a+"</span></td>",n+="              </tr>",n+="          </table>     ",n+="             </div>",n+="          <button class='cf_bt bt_cancel' data-dismiss='modal'>取消</button>      ",n+="          <button class='cf_bt' onclick='g_saving.doBuy("+e+")'>存入</button>",n+="             </div>"},Saving.prototype.outContent=function(e,t,i){var a=ForDight(i.amount*(t.rate/100)),n=timeoutDesc(i,t),s="取出定期存款，将无法获得利息收益";"已到期"==n&&(s="已到期，请取出并获得本金和利息",n="");var o="        <div class='cfsaving_div'>";return o+="        <div><span class='cpgapedetail_h2 left'>"+t.name+"取款</span>",o+="<span class='cpgapedetail_h3'>(1年=现实24小时)</span>",o+="<span class='cfsaving_stext out'>取款 </span></div>",o+="<img src='static/img/pop_line.png' class='cf_line'>",o+="           <div class='cfmsg_text saving'>  ",o+="        <table id='toplist1_tab' class='cfsaving_content'>",o+="             <tr>",o+="               <td>利率: "+t.rate+"%</td>",o+="              </tr>",o+="             <tr>",o+="               <td>当前存入: <span id='savingprofit' style='color:red'>"+i.amount+"</span> "+n+"</td>",o+="              </tr>",o+="             <tr>",o+="               <td>预计利息: <span>"+a+"</span></td>",o+="              </tr>",o+="             <tr>",o+="               <td><span style='color:red'>"+s+"</span></td>",o+="              </tr>",o+="          </table>     ",o+="             </div>",o+="          <button class='cf_bt bt_cancel' onclick='g_saving.closeDetail()'>取消</button>      ",o+="          <button class='cf_bt' onclick='g_saving.doBuy("+e+")'>取出</button>",o+="             </div>"},Saving.prototype.closeDetail=function(e){playAudioHandler("close1"),$("#"+this.tagdetailname).modal("hide")},Saving.prototype.countBuy=function(e,t){var i=document.getElementById("saving_amount"),a=parseInt(i.value);if(100>=a+t)return void g_msg.tip("定期存款不能少于100");a+=t,i.value=a;var n=store.get(this.name),s=n[e];if(null!=s){var o=document.getElementById("savingprofit");o.innerHTML=ForDight(i.value*(s.rate/100))}},Saving.prototype.doBuy=function(e){var t=store.get(this.name)[e];if(null!=t){var i=g_player.getSavingItem(e),a=0;if(0==i.amount){var n=document.getElementById("saving_amount");if(a=parseInt(n.value),100>=a)return void g_msg.tip("定期存款不能少于100")}else a=0-i.amount;this.requestBuy(e,1,a)}},Saving.prototype.requestBuy=function(e,t,i){if(e&&(g_saving.buyItem={itemid:e,playerid:g_player.data.playerid,qty:t,price:i,amount:i}),!g_saving.buyItem)return!1;var a=g_player.saving[1].amount;if(a<g_saving.buyItem.amount)return void g_msg.tip("您没有这么多钱存入");g_msg.showload("g_saving.requestBuy",!0);var n="type=1&playerid="+g_saving.buyItem.playerid+"&itemid="+g_saving.buyItem.itemid;n+="&qty="+g_saving.buyItem.qty+"&price="+g_saving.buyItem.price+"&amount="+g_saving.buyItem.amount;try{$.ajax({type:"post",url:"/cf/data_update.jsp",data:n,success:function(e){g_saving.buyCallback(cfeval(e)),g_msg.destroyload()}})}catch(s){return logerr(s.name+" :  "+dataobj.responseText),!1}},Saving.prototype.buyCallback=function(e){if(e.code)return void g_msg.tip("操作失败:"+ERR_MSG[e.code]);var t=this.buyItem,i=t.itemid,a=store.get(this.name)[i];if(null!=a){var n=t.amount,s=g_player.getData(this.name);n>0?(s[i]=t,s[i].createtime=Date.parse(new Date),s[i].profit=0):s[i]=null,playAudioHandler("money");var o=g_player.saving[1].amount;o-=n,g_player.updateData({cash:o}),g_quest.onBuyItem(this.name,a,1);var r;r=n>0?"定期存入<span style='color:red'>"+a.name+"</span>成功,金额:"+n:"取出<span style='color:red'>"+a.name+"</span>成功,金额:"+(0-n),g_msg.tip(r);var l=cfeval(e.desc);l.profit>=1&&(g_player.saving[1].amount+=l.profit,g_player.flushPageview(),g_msg.tip("得到利息:"+l.profit)),this.hide(this.tagdetailname),g_bank.buildPage(1)}},Saving.prototype.buy=function(e){var t=store.get(this.name)[e];if(null!=t){var i=g_player.getSavingItem(e),a=0;if(0==i.amount){var n=document.getElementById("saving_amount");if(a=parseInt(n.value),100>=a)return void g_msg.tip("定期存款不能少于100")}else a=0-i.amount;var s=g_player.buyItem(this.name,e,1,a);if(1==s.ret){var o;o=a>0?"定期存入<span style='color:red'>"+t.name+"</span>成功,金额:"+a:"取出<span style='color:red'>"+t.name+"</span>成功,金额:"+(0-a),g_msg.tip(o),this.hide(this.tagdetailname),g_bank.buildPage(1)}}};var g_saving=new Saving;g_saving.init(),Help=function(){this.name="help",this.tagname="my"+this.name,this.pagename=this.tagname+"page"},Help.prototype=new Datamgr,Help.prototype.init=function(){this.buildHTML()},Help.prototype.buildHTML=function(){var e=new PageUtil(this.tagname),t="<div class=\"tab-pane in active\" id='quest2'>";t+="<div class='cfpagedetail stock' id='"+this.pagename+"'>",t+="</div></div>",e.addContent(t),document.write(e.toString());var i=document.getElementById(this.tagname+"_dialog");i&&i.style.setProperty("height",getSizes().PageHeight)},Help.prototype.closeHelp=function(){playAudioHandler("close1"),$("#"+this.tagname).modal("hide");var e=document.getElementById("tag"+this.name);e&&this.name!=g_playerinfo.name&&(e.innerHTML="")},Help.prototype.getDesc=function(){var e=HELP_DESC;return e},Help.prototype.show=function(){playAudioHandler("open1");var e=this.getDesc(),t="        <div style='margin: auto;text-align:center;'>";t+="<div class='cfmsg_h2 help'>游戏帮助</div>",t+="<br>",t+="            <div class='cfmsg_text help' id='cphelp_txt'>"+e+"</div>",t+="          <button class='cf_bt' onclick='g_help.closeHelp()'>关闭</button>",t+="             </div>";var i=document.getElementById(this.pagename);i.innerHTML=t,$("#"+this.tagname).modal({backdrop:"static",position:20,show:!0})},Help.prototype.nextpage=function(e){var t=document.getElementById("cphelp_txt");1==e?t.innerHTML=HELP_DESC:t.innerHTML=HELP_DESC2};var g_help=new Help;g_help.init(),Title=function(){this.name="title",this.tagname="my"+this.name,this.item={},this.data=[]},Title.prototype=new Datamgr,Title.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_titledata)},Title.prototype.getLevel=function(e){var t=g_player.data.exp;e&&e>0&&(t=e);for(var i=0,a=store.get(this.name),n=0;n<a.length;n++)a[n].exp<=t&&(i=a[n].level);return i},Title.prototype.getData=function(e){var t,i=store.get(this.name);e>i.length&&(e=i.length-1);for(var a=0;a<i.length;a++)if(i[a].level==e){t=i[a];break}return t};var g_title=new Title;g_title.init();var MSG={SUCCESS:0,INFO:1,WARN:2,ERROR:3,DANGER:4};Msg=function(){this.name="msg",this.tipname="msgtip",this.loadname="msgload",this.count=0,this.tips=[],this.intips=[],this.outtips=[],this.tagname="my"+this.name,this.pagename=this.tagname+"page"},Msg.prototype=new Datamgr,Msg.prototype.init=function(){this.buildHTML(),setInterval(function(){g_msg.update()},MsgDuration)},Msg.prototype.buildHTML=function(){var e=new PageUtil(this.tagname);content="<div class=\"tab-pane in active\" id='quest2'>",content+="<div class='cfpagedetail small' id='"+this.pagename+"'>",content+="</div></div>",e.addContent(content),document.write(e.toString());var t=document.getElementById(this.tagname+"_dialog");t&&t.style.setProperty("height",getSizes().PageHeight)},Msg.prototype.tip=function(e){this.intips.push(e)},Msg.prototype.createtip=function(e){var t="msgtip"+this.count;return this.count++,tag=document.createElement("DIV"),tag.id=t,tag.className="cfmsg",tag.innerHTML=e,document.body.appendChild(tag),$("#"+t).animate({marginTop:-340},2800,MsgTipCallback),t},Msg.prototype.showload=function(e,t){this.destroyload(),this.netmsgWait=NetReqWait;var i=e.indexOf("findQuotes");i>0&&(this.netmsgWait=1e4),tag=document.createElement("DIV"),tag.id=this.loadname,tag.className="cfmsg load";var a="";a+="<img id='msg_load1' class='cfmsg_loadimg' src='static/img/load_1.png'>",a+="<img id='msg_load2' class='cfmsg_loadimg' src='static/img/load_2.png'>",t?(a+="<img id='msg_load3' class='cfmsg_loadimg' src='static/img/load_5.png'>",a+="<img id='msg_load4' class='cfmsg_loadimg' src='static/img/load_6.png'>"):(a+="<img id='msg_load3' class='cfmsg_loadimg' src='static/img/load_3.png'>",a+="<img id='msg_load4' class='cfmsg_loadimg' src='static/img/load_4.png'>"),a+="<img id='msg_load5' class='cfmsg_loadimg pp' src='static/img/load_0.png'>",a+="<img id='msg_load6' class='cfmsg_loadimg pp' src='static/img/load_0.png'>",a+="<img id='msg_load7' class='cfmsg_loadimg pp' src='static/img/load_0.png'>",a+="</div>",tag.innerHTML=a,document.body.appendChild(tag);var n=new Date;this.loadreq={callback:e,start:n.getTime()},loadAni()},Msg.prototype.destroyload=function(){this.loadreq=null;var e=$("#"+this.loadname);e&&e.remove()},Msg.prototype.openModal=function(e,t,i,a){var n="        <div style='margin: auto;text-align:center;'>";if(n+="<div class='cfmsg_h2'>"+e+"</div>",n+="<br>",n+="            <div class='cfmsg_text'>"+t+"</div>",null==i)n+="          <button class='cf_bt' data-dismiss='modal'>确认</button>";else{var s="";a&&(s=a),n+="          <button class='cf_bt' onclick='"+i+"("+s+")'>确认</button>"}n+="             </div>";var o=document.getElementById(this.pagename);o.innerHTML=n,$("#"+this.tagname).modal({backdrop:"static",position:getSizes().MsgTop,show:!0})},Msg.prototype.open2=function(e,t,i,a,n,s,o,r){var l="        <div style='margin: auto;text-align:center;'>";null==o&&(o="确认"),l+="<div class='cfmsg_h2'>"+e+"</div>",l+="<img src='static/img/pop_line.png'>",l+="            <div class='cfmsg_text'>"+t+"</div>",null==i?l+="          <button class='cf_bt' data-dismiss='modal'>确认</button>":(l+=r?"          <button class='cf_bt bt_cancel' onclick='"+r+"()'>取消</button>":"          <button class='cf_bt bt_cancel' data-dismiss='modal'>取消</button>",null==a&&(a="1"),null==n&&(n="1"),null==s&&(s="1"),l+="          <button class='cf_bt' onclick='"+i+"("+a+","+n+","+s+")'>"+o+"</button>"),l+="             </div>";var c=document.getElementById(this.pagename);c.innerHTML=l,$("#"+this.tagname).modal({position:getSizes().MsgTop,show:!0})},Msg.prototype.open=function(e,t,i,a,n){this.open2("提示",e,t,i,a,n)},Msg.prototype.openNetMsg=function(e){var t="网络异常，请确认网络畅通后重试",i="        <div style='margin: auto;text-align:center;'>",a="重试";i+="<div class='cfmsg_h2'>提示</div>",i+="<br>",i+="            <div class='cfmsg_text'>"+t+"</div>",i+="          <button class='cf_bt bt_cancel' data-dismiss='modal'>取消</button>",i+="          <button class='cf_bt' onclick='g_msg.requestAgain("+e+")'>"+a+"</button>",i+="             </div>";var n=document.getElementById(this.pagename);n.innerHTML=i,$("#"+this.tagname).modal({position:getSizes().MsgTop,show:!0})},Msg.prototype.requestAgain=function(e){this.hide(),e()},Msg.prototype.update=function(){if(this.count++,this.count%20==0)for(;this.intips.length>0;){var e=g_msg.intips.shift(),t=this.createtip(e);this.outtips.push(t);break}if(this.loadreq){var i=new Date,a=i.getTime()-this.loadreq.start;if(a<this.netmsgWait)return;this.openNetMsg(this.loadreq.callback),this.destroyload()}};var g_msg=new Msg;g_msg.init(),Uplevel=function(){this.name="uplevel",this.count=0,this.tagname="my"+this.name,this.pagename=this.tagname+"page"},Uplevel.prototype=new Datamgr,Uplevel.prototype.init=function(){this.buildHTML(),setInterval(function(){g_uplevel.update()},MsgDuration)},Uplevel.prototype.buildHTML=function(){var e=new PageUtil(this.tagname);content="<div class=\"tab-pane in active\" id='quest2'>",content+="<img class='cfuplevel_img' id='msglevel_g1'>",content+="<div class='cfpagedetail uplevel' id='"+this.pagename+"'>",content+="</div></div>",e.addContent(content),document.write(e.toString());var t=document.getElementById("msglevel_g1");t=document.getElementById("cssvalues")},Uplevel.prototype.open=function(){this.isLevel=!0;var e=g_title.getLevel(),t="        <div class='cfuplevel_block'>";t+="<div><img src='static/img/title_up.png'></div>",t+="<img src='static/img/pop_line.png'>",t+=" <div class='cfplayer_head_bg uplevel'>",t+="<img src='"+head_imgs[g_player.data.sex].src+"'/>",t+=" </div>",t+="            <div class='cfmsg_text uplevel'>恭喜升级为"+e+"级<br>获得新称号:",t+=g_title.getData(e).name+"</div>",t+="          <button class='cf_bt' onclick='g_uplevel.closeLevel()'>确认</button>",t+="             </div>";var i=document.getElementById(this.pagename);i.innerHTML=t,$("#"+this.tagname).modal({position:0,show:!0})},Uplevel.prototype.closeLevel=function(){$("#"+this.tagname).modal("hide"),this.isLevel=!1},Uplevel.prototype.update=function(){if(this.isLevel){var e=document.getElementById("msglevel_g1"),t=e.src.indexOf("up_g1.png");t>0?e.src="static/img/up_g2.png":e.src="static/img/up_g1.png"}};var g_uplevel=new Uplevel;g_uplevel.init(),Event=function(){this.name="event",this.tagname="my"+this.name,this.pagename=this.tagname+"page",this.tagdetailname=this.tagname+"detail",this.pagedetailname=this.tagdetailname+"page",this.firstTrigger=!0,this.firstTick=0,this.tick=0},Event.prototype=new Datamgr,Event.prototype.init=function(){store.remove(this.name);var e=store.get(this.name);null==e&&store.set(this.name,data_eventdata)},Event.prototype.triggerEvent=function(){var e=store.get(this.name),t=Math.floor(Math.random()*e.length),i=e[t];playAudioHandler("open1"),1==i.type?this.badEvent(i,t):this.goodEvent(i,t)},Event.prototype.goodEvent=function(e,t){var i,a=g_player.insure;null!=a[e.itemid]&&(i=!0);var n="",s=cfeval(e.prize),o=itemValue(s,ITEM_TYPE.CASH),r=store.get(g_insure.name)[e.itemid],n=(r?r.name:"","<div style='cfevent_content'>");n+="<table><tr>",n+="<td><div class='cfplayer_head_bg event'><img src='static/img/event_1.png'></div></td>",n+="<td><div class='cfevent_desc'>"+e.descs+"</div></td>",n+="</tr></table>",n+="</div>",n+="<div class='cfevent_get'>",n+="获得 <img class='cficon_money' src='static/img/money.png'/>",n+="<span id='cfevent_prize' class='cfevent_prize'>"+o+"</span>",n+="</div>",g_msg.openModal(e.name,n,"g_event.eventOkCallback",t)},Event.prototype.badEvent=function(e,t){var i=g_player.insure,a=cfeval(e.prize),n=0-itemValue(a,ITEM_TYPE.CASH);if(i[e.itemid]){var s="<div style='cfevent_content'>";s+="<table><tr>",s+="<td><div class='cfplayer_head_bg event'><img src='static/img/event_1.png'></div></td>",s+="<td><div class='cfevent_desc'>",s+="<span style='color:green'>"+e.descs+"</span></div></td>",s+="</tr></table>",
s+="</div>",s+="<div>",s+="<br>",s+="已购买保险，成功避开意外损失:<br><img class='cficon_money' src='static/img/money.png'/> <span style='color:red'>"+n+"</span>",s+="</div>",g_msg.openModal(e.name,s)}else{var o=store.get(g_insure.name)[e.itemid],r=o?o.name:"",s="";s+="<div style='cfevent_content'>",s+="<table><tr>",s+="<td><div class='cfplayer_head_bg event bad'><img src='static/img/event_"+e.itemid+".png'></div></td>",s+="<td><div class='cfevent_desc'>"+e.descs+"</div></td>",s+="</tr></table>",s+="</div>",s+="<div class='cfevent_get'>",s+="损失 <img class='cficon_money' src='static/img/money.png'/> ",s+="<span id='cfevent_prize' class='cfevent_prize'>"+n+"</span>",s+="</div>",s+="(你可购买<span style='color:red'>"+r+"</span>来规避该损失)",g_msg.openModal(e.name,s,"g_event.eventOkCallback",t)}},Event.prototype.eventOkCallback=function(e){var t=store.get(this.name),i=t[e];playAudioHandler("money");var a=$("#cfevent_prize");a.animate({fontSize:"2.5em"},500),a.animate({left:"-="+getSizes().EventMoney[0],top:"-="+getSizes().EventMoney[1]},1500),a.animate({fontSize:"1em"},300,function(){if(a.remove(),i){var e=cfeval(i.prize);g_player.prize(e)}g_msg.hide()})},Event.prototype.aniCallback=function(){var e=$("#cfevent_prize");e.remove()},Event.prototype.update=function(){if(this.firstTrigger)this.firstTick++,this.firstTick%FirstEventTriggerTime==0&&(this.triggerEvent(),this.firstTrigger=!1);else{var e=data_eventdata_feq*EventTriggerTime;this.tick++,this.tick%e==0}};var g_event=new Event;g_event.init(),Main=function(){},Main.prototype.init=function(){var e=getPar("OPENID");if(!e||e.length<=0)return void gameErr("获取初始化参数失败，无法进入游戏!");g_openid=e;var t=document.createElement("canvas");t.width=getSizes().SceneWidth,t.height=getSizes().SceneHeight,document.body.appendChild(t);getStyleValue("zui.css",".modal-dialog","width");g_game=new Game,g_game.init(t)};var g_main=new Main;g_main.init();